import{a}from"./chunk-KJUOHDYT.js";import{c as F}from"./chunk-VPEJC4WG.js";import{A as d,Ab as I,Bb as S,C as g,D as p,O as m,P as y,Q as v,Ra as D,W as l,ea as C,jb as K,qb as A,u as h,w as c,za as E}from"./chunk-DIPV63T5.js";var b={provide:F,useExisting:h(()=>k),multi:!0},V={pint:/^[\d]*$/,int:/^[-]?[\d]*$/,pnum:/^[\d\.]*$/,money:/^[\d\.\s,]*$/,num:/^[-]?[\d\.]*$/,hex:/^[0-9a-f]*$/i,email:/^[a-z0-9_\.\-@]*$/i,alpha:/^[a-z_]*$/i,alphanum:/^[a-z0-9_]*$/i},u={TAB:9,RETURN:13,ESC:27,BACKSPACE:8,DELETE:46},M={63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},k=(()=>{class s{document;platformId;el;pValidateOnly;set pattern(t){this._pattern=t,t instanceof RegExp?this.regex=t:t in V?this.regex=V[t]:this.regex=/./}get pattern(){return this._pattern}ngModelChange=new y;regex=/./;_pattern;isAndroid;lastValue;constructor(t,e,i){this.document=t,this.platformId=e,this.el=i,S(this.platformId)?this.isAndroid=a.isAndroid():this.isAndroid=!1}isNavKeyPress(t){let e=t.keyCode;return e=a.getBrowser().safari&&M[e]||e,e>=33&&e<=40||e==u.RETURN||e==u.TAB||e==u.ESC}isSpecialKey(t){let e=t.keyCode||t.charCode;return e==9||e==13||e==27||e==16||e==17||e>=18&&e<=20||a.getBrowser().opera&&!t.shiftKey&&(e==8||e>=33&&e<=35||e>=36&&e<=39||e>=44&&e<=45)}getKey(t){let e=t.keyCode||t.charCode;return a.getBrowser().safari&&M[e]||e}getCharCode(t){return t.charCode||t.keyCode||t.which}findDelta(t,e){let i="";for(let r=0;r<t.length;r++)t.substr(0,r)+t.substr(r+t.length-e.length)===e&&(i=t.substr(r,t.length-e.length));return i}isValidChar(t){return this.regex.test(t)}isValidString(t){for(let e=0;e<t.length;e++)if(!this.isValidChar(t.substr(e,1)))return!1;return!0}onInput(t){if(this.isAndroid&&!this.pValidateOnly){let e=this.el.nativeElement.value,i=this.lastValue||"",r=this.findDelta(e,i),n=this.findDelta(i,e);r.length>1||!r&&!n?this.isValidString(e)||(this.el.nativeElement.value=i,this.ngModelChange.emit(i)):n||this.isValidChar(r)||(this.el.nativeElement.value=i,this.ngModelChange.emit(i)),e=this.el.nativeElement.value,this.isValidString(e)&&(this.lastValue=e)}}onKeyPress(t){if(this.isAndroid||this.pValidateOnly)return;let e=a.getBrowser(),i=this.getKey(t);if(e.mozilla&&(t.ctrlKey||t.altKey))return;if(i==17||i==18||i==13)return;let r=this.getCharCode(t),n=String.fromCharCode(r),o=!0;if(!e.mozilla&&(this.isSpecialKey(t)||!n))return;let f=this.el.nativeElement.value||"",T=t.currentTarget.selectionStart||0,x=t.currentTarget.selectionEnd||0,B=f.substring(0,T)+n+f.substring(x);o=this.regex.test(B),o||t.preventDefault()}onPaste(t){let e=t.clipboardData||this.document.defaultView.clipboardData.getData("text");if(e){let i=/\{[0-9]+\}/,r=e.getData("text");if(i.test(this.regex.toString())){if(!this.regex.test(r)){t.preventDefault();return}}else for(let n of r.toString())if(!this.regex.test(n)){t.preventDefault();return}}}validate(t){if(this.pValidateOnly){let e=this.el.nativeElement.value;if(e&&!this.regex.test(e))return{validatePattern:!1}}}static \u0275fac=function(e){return new(e||s)(l(A),l(v),l(m))};static \u0275dir=p({type:s,selectors:[["","pKeyFilter",""]],hostAttrs:[1,"p-element"],hostBindings:function(e,i){e&1&&E("input",function(n){return i.onInput(n)})("keypress",function(n){return i.onKeyPress(n)})("paste",function(n){return i.onPaste(n)})},inputs:{pValidateOnly:[d.HasDecoratorInputTransform,"pValidateOnly","pValidateOnly",K],pattern:[d.None,"pKeyFilter","pattern"]},outputs:{ngModelChange:"ngModelChange"},features:[D([b]),C]})}return s})(),U=(()=>{class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=g({type:s});static \u0275inj=c({imports:[I]})}return s})();export{k as a,U as b};
