import{a as q}from"./chunk-266ZWEGB.js";import{c as B}from"./chunk-ODTFD3QQ.js";import"./chunk-TVFTUAXU.js";import{a as J}from"./chunk-PPPOWXK6.js";import{e as A,f as M,h as D,i as N,m as $,n as O,s as R,t as H,u as V}from"./chunk-3362O3CL.js";import"./chunk-XQ5SMVZC.js";import"./chunk-A4YBSHQE.js";import"./chunk-ZRB5JYID.js";import"./chunk-R4EC5V5S.js";import"./chunk-DECUXDPT.js";import"./chunk-FTJNOPBC.js";import{e as z}from"./chunk-53BCAK53.js";import"./chunk-NELNUKEX.js";import{d as x,e as E}from"./chunk-KZGPV3OV.js";import"./chunk-6MWK2YGG.js";import"./chunk-MROZGMZP.js";import"./chunk-S23T3VNK.js";import"./chunk-ZSZR532A.js";import{g as L,h as j,j as F}from"./chunk-3IAGLYRS.js";import{g as f,k as h}from"./chunk-56NTXRTG.js";import{d as G,e as I,i as k}from"./chunk-BQWNWUNE.js";import"./chunk-LUKISEWT.js";import{Ab as u,C as P,Ra as a,Rc as T,Sa as s,Sb as _,Tb as C,Uc as w,Vb as m,ba as y,d as g,dc as S,ec as b,ib as c,tb as d,ub as l,vb as v}from"./chunk-UISEBZIM.js";var U=()=>["step/general"],W=()=>[],X=()=>[10,20,50],_e=(()=>{class p{constructor(e,i,t,r,n,K){this.router=e,this.confirmationService=i,this.gendersService=t,this.loadingService=r,this.messageService=n,this.productsService=K,this.columns=[{header:"#",field:"id",clickable:!1,image:!1,money:!1},{header:"G\xE9nero",field:"gender",clickable:!1,image:!1,money:!1},{header:"Nombre",field:"name",clickable:!1,image:!1,money:!1},{header:"Stock",field:"stock",clickable:!1,image:!1,money:!1},{header:"Acci\xF3n",field:"button",clickable:!1,image:!1,money:!1}],this.limit=10,this.page=1,this.name="",this.callToAction=[{type:"button",size:"small",icon:"pi pi-pencil",outlined:!0,pTooltip:"Editar",tooltipPosition:"bottom",click:o=>this.editProductButton(o.id)},{type:"button",size:"small",icon:"pi pi-tag",outlined:!0,pTooltip:"Tallas",tooltipPosition:"bottom",click:o=>this.sizeProductButton(o.id)},{type:"button",size:"small",icon:"pi pi-palette",outlined:!0,pTooltip:"Colores",tooltipPosition:"bottom",click:o=>this.colorProductButton(o.id)},{type:"button",size:"small",icon:"pi pi-shop",outlined:!0,pTooltip:"Ecommerce",tooltipPosition:"bottom",click:o=>this.ecommerceProductButton(o.id)},{type:"button",size:"small",icon:"pi pi-trash",outlined:!0,pTooltip:"Eliminar",tooltipPosition:"bottom",click:(o,Q)=>this.deleteProductButton(o.id,Q)},{type:"button",size:"small",icon:"pi pi-history",outlined:!0,pTooltip:"Historial",tooltipPosition:"bottom",click:o=>this.historyProductButton(o.id)}],this.genders=[],this.selectedGenderIds=[],this.formGroup=new j({search:new F(null)})}ngOnInit(){this.getProducts(this.limit,this.page,this.name),this.formGroup.get("search")?.valueChanges.pipe(P(600)).subscribe(e=>{this.name=e||"",this.loadingService.sendLoadingState(!0),this.getProducts(this.limit,this.page,this.name)}),this.gendersService.getAll().subscribe(e=>{this.genders=e})}selectFilter(e){this.selectedGenderIds.push(e)}clearFilter(){this.name="",this.loadingService.sendLoadingState(!0),this.formGroup.get("search")?.setValue("")}handleGenderSelection(e){this.selectedGenderIds=e,this.loadingService.sendLoadingState(!0),this.getProducts(this.limit,1,this.name,this.selectedGenderIds)}getProducts(){return g(this,arguments,function*(e=this.limit,i=this.page,t=this.name,r=this.selectedGenderIds){this.updatePage(i),this.productsService.callGetList(e,i,t,r).subscribe(),setTimeout(()=>{this.loadingService.sendLoadingState(!1)},600)})}onPageSelected(e){return g(this,null,function*(){this.updatePage((e.page??0)+1),this.getProducts(e.rows,this.page)})}get products(){return this.productsService.getList()}get total(){return this.productsService.getTotal()}addProductButton(){this.router.navigate(["/inventories/products/create/general"])}editProductButton(e){this.router.navigate([`/inventories/products/step/general/${e}`])}sizeProductButton(e){this.router.navigate([`/inventories/products/sizes/${e}`])}colorProductButton(e){this.router.navigate([`/inventories/products/colors/${e}`])}ecommerceProductButton(e){this.router.navigate([`/inventories/products/ecommerce/${e}`])}historyProductButton(e){this.router.navigate([`/inventories/products/history/${e}`])}deleteProductButton(e,i){this.confirmationService.confirm({target:i.target,message:"Deseas eliminar este producto?",header:"Eliminar producto",icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-danger p-button-text",rejectButtonStyleClass:"p-button-text p-button-text",acceptIcon:"none",rejectIcon:"none",acceptLabel:"S\xED",rejectLabel:"No",accept:()=>{this.productsService.delete(e).subscribe({next:()=>$(this.messageService,"El producto ha sido eliminado"),error:()=>O(this.messageService,"No se elemin\xF3 el producto, intentel\xF3 nuevamente")})},reject:()=>{}})}updatePage(e){this.page=e}static{this.\u0275fac=function(i){return new(i||p)(s(G),s(f),s(q),s(D),s(h),s(J))}}static{this.\u0275cmp=y({type:p,selectors:[["app-products"]],standalone:!0,features:[_([f,B,h]),C],decls:14,vars:19,consts:[[1,"card"],[1,"flex","flex-column","md:flex-row","align-items-center","justify-content-between","gap-3","mt-3","w-full"],[1,"w-full","md:w-4","flex","justify-content-start","flex-order-2","md:flex-order-1"],["controlName","search",1,"w-full",3,"clearFilter","formGroup"],[1,"w-full","md:w-auto","flex","flex-wrap","justify-content-center","gap-2","flex-order-3","md:flex-order-2"],[3,"selectionChange","collection","selectedIds"],[1,"w-full","md:w-4","flex","justify-content-center","md:justify-content-end","flex-order-1","md:flex-order-3"],["styleClass","w-full md:w-auto",3,"routerLink","outlined"],[1,"pi","pi-plus",2,"font-size","1rem"],[3,"paginateSelected","data","columns","callToAction","cellToAction","total","limit","rowsPerPageOptions"]],template:function(i,t){if(i&1&&(d(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-input-search",3),u("clearFilter",function(){return t.clearFilter()}),l()(),d(4,"div",4)(5,"app-input-filter",5),u("selectionChange",function(n){return t.handleGenderSelection(n)}),l()(),d(6,"div",6)(7,"p-button",7),v(8,"i",8),l()()(),d(9,"app-table-pagination",9),S(10,"async"),S(11,"async"),u("paginateSelected",function(n){return t.onPageSelected(n)}),l(),v(12,"p-toast")(13,"p-confirmDialog"),l()),i&2){let r,n;a(3),c("formGroup",t.formGroup),a(2),c("collection",t.genders)("selectedIds",t.selectedGenderIds),a(2),c("routerLink",m(16,U))("outlined",!0),a(2),c("data",(r=b(10,12,t.products))!==null&&r!==void 0?r:m(17,W))("columns",t.columns)("callToAction",t.callToAction)("cellToAction",t.cellToAction)("total",(n=b(11,14,t.total))!==null&&n!==void 0?n:0)("limit",t.limit)("rowsPerPageOptions",m(18,X))}},dependencies:[w,T,M,A,z,k,I,V,L,N,R,H,E,x],styles:[".btn-menu{background-color:#dfe3e8;border:1px solid #dfe3e8;color:#475569;border-radius:5px;height:39px}  .btn-selected{background-color:#75787b;color:#fff}  .h-custom{height:37px}"]})}}return p})();export{_e as ProductListComponent};
