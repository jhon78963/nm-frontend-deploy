import{a as Z}from"./chunk-PPPOWXK6.js";import"./chunk-NELNUKEX.js";import{f as Y}from"./chunk-53BCAK53.js";import{p as T,q as v}from"./chunk-56NTXRTG.js";import{f as X}from"./chunk-DIBFAAWP.js";import{Bb as d,Gb as M,Ib as k,Jb as w,Kb as q,Lb as p,Lc as O,Mb as S,Nb as C,Nc as J,Oc as K,Pc as L,Qc as W,Ra as a,Sa as E,T as _,Tb as B,Uc as u,Wb as F,Y as D,Zb as V,ab as N,ac as U,ba as y,ca as h,gb as m,gc as G,hb as f,ib as s,mb as x,ob as Q,rb as z,sb as $,tb as n,ua as j,ub as l,vb as c,wb as P,xb as H,yb as b}from"./chunk-UISEBZIM.js";var le=(e,o,t,i,r,g,I)=>({"p-timeline p-component":!0,"p-timeline-left":e,"p-timeline-right":o,"p-timeline-top":t,"p-timeline-bottom":i,"p-timeline-alternate":r,"p-timeline-vertical":g,"p-timeline-horizontal":I}),A=e=>({$implicit:e});function oe(e,o){e&1&&b(0)}function re(e,o){e&1&&b(0)}function pe(e,o){if(e&1&&(P(0),m(1,re,1,0,"ng-container",5),H()),e&2){let t=d().$implicit,i=d();a(),s("ngTemplateOutlet",i.markerTemplate)("ngTemplateOutletContext",F(2,A,t))}}function se(e,o){e&1&&c(0,"div",10),e&2&&f("data-pc-section","marker")}function me(e,o){e&1&&c(0,"div",11)}function ce(e,o){e&1&&b(0)}function de(e,o){if(e&1&&(n(0,"div",3)(1,"div",4),m(2,oe,1,0,"ng-container",5),l(),n(3,"div",6),m(4,pe,2,4,"ng-container",7)(5,se,1,1,"ng-template",null,0,G)(7,me,1,0,"div",8),l(),n(8,"div",9),m(9,ce,1,0,"ng-container",5),l()()),e&2){let t=o.$implicit,i=o.last,r=q(6),g=d();f("data-pc-section","event"),a(),f("data-pc-section","opposite"),a(),s("ngTemplateOutlet",g.oppositeTemplate)("ngTemplateOutletContext",F(11,A,t)),a(),f("data-pc-section","separator"),a(),s("ngIf",g.markerTemplate)("ngIfElse",r),a(3),s("ngIf",!i),a(),f("data-pc-section","content"),a(),s("ngTemplateOutlet",g.contentTemplate)("ngTemplateOutletContext",F(13,A,t))}}var ee=(()=>{class e{el;value;style;styleClass;align="left";layout="vertical";templates;contentTemplate;oppositeTemplate;markerTemplate;constructor(t){this.el=t}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"content":this.contentTemplate=t.template;break;case"opposite":this.oppositeTemplate=t.template;break;case"marker":this.markerTemplate=t.template;break}})}static \u0275fac=function(i){return new(i||e)(E(j))};static \u0275cmp=y({type:e,selectors:[["p-timeline"]],contentQueries:function(i,r,g){if(i&1&&M(g,T,4),i&2){let I;k(I=w())&&(r.templates=I)}},hostAttrs:[1,"p-element"],inputs:{value:"value",style:"style",styleClass:"styleClass",align:"align",layout:"layout"},decls:2,vars:15,consts:[["marker",""],[3,"ngStyle","ngClass"],["class","p-timeline-event",4,"ngFor","ngForOf"],[1,"p-timeline-event"],[1,"p-timeline-event-opposite"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-timeline-event-separator"],[4,"ngIf","ngIfElse"],["class","p-timeline-event-connector",4,"ngIf"],[1,"p-timeline-event-content"],[1,"p-timeline-event-marker"],[1,"p-timeline-event-connector"]],template:function(i,r){i&1&&(n(0,"div",1),m(1,de,10,15,"div",2),l()),i&2&&(x(r.styleClass),s("ngStyle",r.style)("ngClass",U(7,le,r.align==="left",r.align==="right",r.align==="top",r.align==="bottom",r.align==="alternate",r.layout==="vertical",r.layout==="horizontal")),f("data-pc-name","timeline")("data-pc-section","root"),a(),s("ngForOf",r.value))},dependencies:[O,J,K,W,L],styles:[`@layer primeng{.p-timeline{display:flex;flex-grow:1;flex-direction:column}.p-timeline-left .p-timeline-event-opposite{text-align:right}.p-timeline-left .p-timeline-event-content{text-align:left}.p-timeline-right .p-timeline-event{flex-direction:row-reverse}.p-timeline-right .p-timeline-event-opposite{text-align:left}.p-timeline-right .p-timeline-event-content{text-align:right}.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(2n){flex-direction:row-reverse}.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(odd) .p-timeline-event-opposite{text-align:right}.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(odd) .p-timeline-event-content{text-align:left}.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(2n) .p-timeline-event-opposite{text-align:left}.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(2n) .p-timeline-event-content{text-align:right}.p-timeline-event{display:flex;position:relative;min-height:70px}.p-timeline-event:last-child{min-height:0}.p-timeline-event-opposite,.p-timeline-event-content{flex:1;padding:0 1rem;min-width:100px}.p-timeline-event-separator{flex:0;display:flex;align-items:center;flex-direction:column}.p-timeline-event-marker{display:flex;align-self:baseline}.p-timeline-event-connector{flex-grow:1}.p-timeline-horizontal{flex-direction:row}.p-timeline-horizontal .p-timeline-event{flex-direction:column;flex:1}.p-timeline-horizontal .p-timeline-event:last-child{flex:0}.p-timeline-horizontal .p-timeline-event-separator{flex-direction:row}.p-timeline-horizontal .p-timeline-event-connector{width:100%}.p-timeline-bottom .p-timeline-event{flex-direction:column-reverse}.p-timeline-horizontal.p-timeline-alternate .p-timeline-event:nth-child(2n){flex-direction:column-reverse}}
`],encapsulation:2,changeDetection:0})}return e})(),te=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=h({type:e});static \u0275inj=_({imports:[u,v]})}return e})();var ie=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=h({type:e});static \u0275inj=_({imports:[u,v]})}return e})();var ne=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=h({type:e});static \u0275inj=_({imports:[u,v,v]})}return e})();var ve=(e,o)=>o.field,_e=(e,o,t,i)=>({"bg-green-500":e,"bg-blue-500":o,"bg-red-500":t,"bg-gray-500":i});function ye(e,o){e&1&&(n(0,"div",1),c(1,"i",2),n(2,"span"),p(3,"Cargando historial..."),l()())}function he(e,o){e&1&&(n(0,"div",3),c(1,"i",4),n(2,"span"),p(3,"No hay movimientos registrados para este producto."),l()())}function xe(e,o){if(e&1&&(n(0,"span",9),c(1,"i"),l()),e&2){let t=o.$implicit;s("ngClass",V(3,_e,t.severity==="success",t.severity==="info",t.severity==="danger",t.severity==="secondary")),a(),x(t.icon)}}function Ce(e,o){if(e&1&&(n(0,"div",24)(1,"div",25),p(2),l(),n(3,"div",26),p(4),l(),n(5,"div",27),p(6),l()()),e&2){let t=o.$implicit;a(2),C(" ",t.field," "),a(2),C(" ",t.from," "),a(2),C(" ",t.to," ")}}function Te(e,o){if(e&1&&(n(0,"div",18)(1,"div",19)(2,"div",20),p(3,"Campo"),l(),n(4,"div",21),p(5,"Antes"),l(),n(6,"div",22),p(7,"Ahora"),l()(),n(8,"div",23),z(9,Ce,7,3,"div",24,ve),l()()),e&2){let t=d().$implicit;a(9),$(t.changes)}}function be(e,o){if(e&1&&(n(0,"div",10)(1,"div",11)(2,"div")(3,"span",12),p(4),l(),n(5,"span",13),c(6,"i",14),p(7),l()(),n(8,"div",15)(9,"span",16),p(10),l(),n(11,"span",17),p(12),l()()(),m(13,Te,11,0,"div",18),l()),e&2){let t=o.$implicit;a(4),S(t.action_title),a(3),C(" ",t.user," "),a(3),S(t.date),a(2),S(t.time),a(),Q(13,t.changes&&t.changes.length>0?13:-1)}}function Se(e,o){if(e&1&&(n(0,"div",5)(1,"p-timeline",6),m(2,xe,2,8,"ng-template",7)(3,be,14,5,"ng-template",8),l()()),e&2){let t=d();a(),s("value",t.events())}}var Ke=(()=>{class e{constructor(){this.productsService=D(Z),this.route=D(X),this.events=N([]),this.loading=N(!0)}ngOnInit(){let t=this.route.snapshot.params.id;t&&this.loadHistory(t)}loadHistory(t){this.loading.set(!0),this.productsService.getHistory(t).subscribe({next:i=>{i.success&&this.events.set(i.data),this.loading.set(!1)},error:()=>this.loading.set(!1)})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=y({type:e,selectors:[["app-product-history"]],standalone:!0,features:[B],decls:4,vars:1,consts:[[1,"w-full","h-full",2,"min-height","400px"],[1,"flex","flex-column","align-items-center","justify-content-center","p-6","gap-3","text-500"],[1,"pi","pi-spin","pi-spinner","text-4xl"],[1,"flex","flex-column","align-items-center","justify-content-center","p-6","gap-3","text-400"],[1,"pi","pi-history","text-5xl","opacity-50"],[1,"px-2","py-4"],["align","left","styleClass","w-full",3,"value"],["pTemplate","marker"],["pTemplate","content"],[1,"custom-marker","shadow-2",3,"ngClass"],[1,"surface-card","border-1","border-200","border-round","p-3","mb-3","shadow-1"],[1,"flex","justify-content-between","align-items-start","mb-2"],[1,"block","font-bold","text-900","text-sm"],[1,"text-xs","text-500","flex","align-items-center","gap-1","mt-1"],[1,"pi","pi-user"],[1,"text-right"],[1,"block","text-xs","font-bold","text-700"],[1,"text-xs","text-500"],[1,"surface-50","border-round","p-2","mt-2"],[1,"grid","grid-nogutter","text-xs","font-bold","text-500","mb-1","px-2"],[1,"col-4"],[1,"col-4","text-center"],[1,"col-4","text-right"],[1,"flex","flex-column","gap-1"],[1,"grid","grid-nogutter","text-sm","px-2","py-1","border-bottom-1","surface-border"],[1,"col-4","font-medium","text-700"],[1,"col-4","text-center","text-red-400"],[1,"col-4","text-right","font-bold","text-green-600"]],template:function(i,r){i&1&&(n(0,"div",0),m(1,ye,4,0,"div",1)(2,he,4,0)(3,Se,4,1),l()),i&2&&(a(),Q(1,r.loading()?1:r.events().length===0?2:3))},dependencies:[u,O,te,ee,T,ie,Y,ne],styles:[".custom-marker[_ngcontent-%COMP%]{display:flex;width:2rem;height:2rem;align-items:center;justify-content:center;color:#fff;border-radius:50%;z-index:1}  .p-timeline-event-content{padding-bottom:2rem}  .p-timeline-event-opposite{flex:0;padding:0!important}"]})}}return e})();export{Ke as ProductHistoryComponent};
