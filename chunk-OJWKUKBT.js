import{a as j,b as M}from"./chunk-FTM6AZP4.js";import{B as P,a as E,w as A}from"./chunk-PHRFU6X7.js";import{d as q}from"./chunk-UXKUMFFU.js";import{d as w}from"./chunk-SU5FXICQ.js";import{d as O,e as k}from"./chunk-JLFYD4SE.js";import{d as h,g as V,l as B,o as R,v as L,x as N}from"./chunk-VPEJC4WG.js";import{Aa as u,Ab as T,B as b,H as y,I as D,Sa as G,W as r,fa as x,g as d,ha as I,l as g,na as $,q as C,r as l,sa as c,ta as m,ua as s,v,y as S,ya as _,za as F}from"./chunk-DIPV63T5.js";var z=(()=>{class e{constructor(t){this.apiService=t,this.colors=[],this.colors$=new d(this.colors),this.total=0,this.total$=new d(this.total)}callGetList(t=10,i=1,o=""){let n=`colors?limit=${t}&page=${i}`;return o&&(n+=`&search=${o}`),this.apiService.get(n).pipe(C(600),g(f=>{this.updateColors(f.data),this.updateTotalColors(f.paginate.total)}))}getList(){return this.colors$.asObservable()}getTotal(){return this.total$.asObservable()}create(t){return this.apiService.post("colors",t).pipe(l(()=>this.callGetList()))}delete(t){return this.apiService.delete(`colors/${t}`).pipe(l(()=>this.callGetList()))}edit(t,i){return this.apiService.patch(`colors/${t}`,i).pipe(l(()=>this.callGetList()))}getOne(t){return this.apiService.get(`colors/${t}`)}updateColors(t){this.colors=t,this.colors$.next(this.colors)}updateTotalColors(t){this.total=t,this.total$.next(this.total)}static{this.\u0275fac=function(i){return new(i||e)(S(w))}}static{this.\u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var p=class{constructor(a){this.id=a.id,this.description=a.description,this.hash=a.hash}};function K(e,a){if(e&1){let t=_();c(0,"form",1),F("ngSubmit",function(){y(t);let o=u();return D(o.buttonSaveColor())}),c(1,"div",2)(2,"div",3),s(3,"app-input-text",4),m(),c(4,"div",3),s(5,"app-input-color-picker",5),m(),s(6,"button",6),m()()}if(e&2){let t=u();I("formGroup",t.form)}}var lt=(()=>{class e{constructor(t,i,o,n){this.formBuilder=t,this.colorsService=i,this.dynamicDialogRef=o,this.dynamicDialogConfig=n,this.colorId=0,this.color="",this.form=this.formBuilder.group({description:["",h.required],hash:["#000000",h.nullValidator]})}ngOnInit(){if(this.dynamicDialogConfig.data.id){let t=this.dynamicDialogConfig.data.id;this.colorId=this.dynamicDialogConfig.data.id,this.colorsService.getOne(t).subscribe(i=>{this.form.patchValue(i)})}}buttonSaveColor(){if(this.form){let t=new p(this.form.value);if(this.dynamicDialogConfig.data.id){let i=this.dynamicDialogConfig.data.id;this.colorsService.edit(i,t).subscribe({next:()=>this.dynamicDialogRef.close({success:!0}),error:()=>{}})}else this.colorsService.create(t).subscribe({next:()=>this.dynamicDialogRef.close({success:!0}),error:()=>this.dynamicDialogRef.close({error:!0})})}}static{this.\u0275fac=function(i){return new(i||e)(r(L),r(z),r(M),r(j))}}static{this.\u0275cmp=b({type:e,selectors:[["app-colors-form"]],standalone:!0,features:[G],decls:2,vars:1,consts:[[1,"pt-2","mt-5",3,"formGroup"],[1,"pt-2","mt-5",3,"ngSubmit","formGroup"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12"],["placeholder","Ingrese color","label","Color","controlName","description"],["controlName","hash"],["type","submit","pButton","","label","Guardar"]],template:function(i,o){i&1&&(x(0,K,7,1,"form",0),s(1,"p-toast")),i&2&&$(0,o.form?0:-1)},dependencies:[T,N,B,V,R,k,O,P,q,E,A]})}}return e})();export{z as a,lt as b};
