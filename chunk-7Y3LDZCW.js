import{a as Z,b as ee}from"./chunk-TCQXBJHA.js";import{a as Y}from"./chunk-PPPOWXK6.js";import"./chunk-NELNUKEX.js";import{f as X}from"./chunk-53BCAK53.js";import{p as S,q as W}from"./chunk-56NTXRTG.js";import{f as U}from"./chunk-DIBFAAWP.js";import{Bb as v,Gb as D,Ib as $,Jb as A,Kb as Q,Lb as m,Lc as T,Mb as y,Nb as u,Nc as G,Oc as J,Pc as K,Qc as L,Ra as o,Sa as P,T as M,Tb as R,Uc as b,Wb as C,Y as E,Zb as B,ab as k,ac as q,ba as x,ca as F,gb as c,gc as V,hb as f,ib as p,mb as _,ob as I,rb as H,sb as z,tb as l,ua as O,ub as a,vb as s,wb as N,xb as j,yb as h}from"./chunk-UISEBZIM.js";var oe=(e,n,t,i,r,d,g)=>({"p-timeline p-component":!0,"p-timeline-left":e,"p-timeline-right":n,"p-timeline-top":t,"p-timeline-bottom":i,"p-timeline-alternate":r,"p-timeline-vertical":d,"p-timeline-horizontal":g}),w=e=>({$implicit:e});function ae(e,n){e&1&&h(0)}function re(e,n){e&1&&h(0)}function me(e,n){if(e&1&&(N(0),c(1,re,1,0,"ng-container",5),j()),e&2){let t=v().$implicit,i=v();o(),p("ngTemplateOutlet",i.markerTemplate)("ngTemplateOutletContext",C(2,w,t))}}function pe(e,n){e&1&&s(0,"div",10),e&2&&f("data-pc-section","marker")}function ce(e,n){e&1&&s(0,"div",11)}function se(e,n){e&1&&h(0)}function de(e,n){if(e&1&&(l(0,"div",3)(1,"div",4),c(2,ae,1,0,"ng-container",5),a(),l(3,"div",6),c(4,me,2,4,"ng-container",7)(5,pe,1,1,"ng-template",null,0,V)(7,ce,1,0,"div",8),a(),l(8,"div",9),c(9,se,1,0,"ng-container",5),a()()),e&2){let t=n.$implicit,i=n.last,r=Q(6),d=v();f("data-pc-section","event"),o(),f("data-pc-section","opposite"),o(),p("ngTemplateOutlet",d.oppositeTemplate)("ngTemplateOutletContext",C(11,w,t)),o(),f("data-pc-section","separator"),o(),p("ngIf",d.markerTemplate)("ngIfElse",r),o(3),p("ngIf",!i),o(),f("data-pc-section","content"),o(),p("ngTemplateOutlet",d.contentTemplate)("ngTemplateOutletContext",C(13,w,t))}}var te=(()=>{class e{el;value;style;styleClass;align="left";layout="vertical";templates;contentTemplate;oppositeTemplate;markerTemplate;constructor(t){this.el=t}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"content":this.contentTemplate=t.template;break;case"opposite":this.oppositeTemplate=t.template;break;case"marker":this.markerTemplate=t.template;break}})}static \u0275fac=function(i){return new(i||e)(P(O))};static \u0275cmp=x({type:e,selectors:[["p-timeline"]],contentQueries:function(i,r,d){if(i&1&&D(d,S,4),i&2){let g;$(g=A())&&(r.templates=g)}},hostAttrs:[1,"p-element"],inputs:{value:"value",style:"style",styleClass:"styleClass",align:"align",layout:"layout"},decls:2,vars:15,consts:[["marker",""],[3,"ngStyle","ngClass"],["class","p-timeline-event",4,"ngFor","ngForOf"],[1,"p-timeline-event"],[1,"p-timeline-event-opposite"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-timeline-event-separator"],[4,"ngIf","ngIfElse"],["class","p-timeline-event-connector",4,"ngIf"],[1,"p-timeline-event-content"],[1,"p-timeline-event-marker"],[1,"p-timeline-event-connector"]],template:function(i,r){i&1&&(l(0,"div",1),c(1,de,10,15,"div",2),a()),i&2&&(_(r.styleClass),p("ngStyle",r.style)("ngClass",q(7,oe,r.align==="left",r.align==="right",r.align==="top",r.align==="bottom",r.align==="alternate",r.layout==="vertical",r.layout==="horizontal")),f("data-pc-name","timeline")("data-pc-section","root"),o(),p("ngForOf",r.value))},dependencies:[T,G,J,L,K],styles:[`@layer primeng{.p-timeline{display:flex;flex-grow:1;flex-direction:column}.p-timeline-left .p-timeline-event-opposite{text-align:right}.p-timeline-left .p-timeline-event-content{text-align:left}.p-timeline-right .p-timeline-event{flex-direction:row-reverse}.p-timeline-right .p-timeline-event-opposite{text-align:left}.p-timeline-right .p-timeline-event-content{text-align:right}.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(2n){flex-direction:row-reverse}.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(odd) .p-timeline-event-opposite{text-align:right}.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(odd) .p-timeline-event-content{text-align:left}.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(2n) .p-timeline-event-opposite{text-align:left}.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(2n) .p-timeline-event-content{text-align:right}.p-timeline-event{display:flex;position:relative;min-height:70px}.p-timeline-event:last-child{min-height:0}.p-timeline-event-opposite,.p-timeline-event-content{flex:1;padding:0 1rem;min-width:100px}.p-timeline-event-separator{flex:0;display:flex;align-items:center;flex-direction:column}.p-timeline-event-marker{display:flex;align-self:baseline}.p-timeline-event-connector{flex-grow:1}.p-timeline-horizontal{flex-direction:row}.p-timeline-horizontal .p-timeline-event{flex-direction:column;flex:1}.p-timeline-horizontal .p-timeline-event:last-child{flex:0}.p-timeline-horizontal .p-timeline-event-separator{flex-direction:row}.p-timeline-horizontal .p-timeline-event-connector{width:100%}.p-timeline-bottom .p-timeline-event{flex-direction:column-reverse}.p-timeline-horizontal.p-timeline-alternate .p-timeline-event:nth-child(2n){flex-direction:column-reverse}}
`],encapsulation:2,changeDetection:0})}return e})(),ie=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=F({type:e});static \u0275inj=M({imports:[b,W]})}return e})();var ve=(e,n)=>n.field,ue=(e,n,t,i)=>({"bg-green-500":e,"bg-blue-500":n,"bg-red-500":t,"bg-gray-500":i});function ge(e,n){e&1&&(l(0,"div",1),s(1,"i",2),l(2,"span"),m(3,"Cargando historial..."),a()())}function xe(e,n){e&1&&(l(0,"div",3),s(1,"i",4),l(2,"span"),m(3,"No hay movimientos registrados para este producto."),a()())}function _e(e,n){if(e&1&&(l(0,"span",9),s(1,"i"),a()),e&2){let t=n.$implicit;p("ngClass",B(3,ue,t.severity==="success",t.severity==="info",t.severity==="danger",t.severity==="secondary")),o(),_(t.icon)}}function he(e,n){if(e&1&&(l(0,"div",24)(1,"div",25),m(2),a(),l(3,"div",26),m(4),a(),l(5,"div",27),m(6),a()()),e&2){let t=n.$implicit;o(2),u(" ",t.field," "),o(2),u(" ",t.from," "),o(2),u(" ",t.to," ")}}function ye(e,n){if(e&1&&(l(0,"div",18)(1,"div",19)(2,"div",20),m(3,"Campo"),a(),l(4,"div",21),m(5,"Antes"),a(),l(6,"div",22),m(7,"Ahora"),a()(),l(8,"div",23),H(9,he,7,3,"div",24,ve),a()()),e&2){let t=v().$implicit;o(9),z(t.changes)}}function Ce(e,n){if(e&1&&(l(0,"div",10)(1,"div",11)(2,"div")(3,"span",12),m(4),a(),l(5,"span",13),s(6,"i",14),m(7),a()(),l(8,"div",15)(9,"span",16),m(10),a(),l(11,"span",17),m(12),a()()(),c(13,ye,11,0,"div",18),a()),e&2){let t=n.$implicit;o(4),y(t.action_title),o(3),u(" ",t.user," "),o(3),y(t.date),o(2),y(t.time),o(),I(13,t.changes&&t.changes.length>0?13:-1)}}function Te(e,n){if(e&1&&(l(0,"div",5)(1,"p-timeline",6),c(2,_e,2,8,"ng-template",7)(3,Ce,14,5,"ng-template",8),a()()),e&2){let t=v();o(),p("value",t.events())}}var Ne=(()=>{class e{constructor(){this.productsService=E(Y),this.route=E(U),this.events=k([]),this.loading=k(!0)}ngOnInit(){let t=this.route.snapshot.params.id;t&&this.loadHistory(t)}loadHistory(t){this.loading.set(!0),this.productsService.getHistory(t).subscribe({next:i=>{i.success&&this.events.set(i.data),this.loading.set(!1)},error:()=>this.loading.set(!1)})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=x({type:e,selectors:[["app-product-history"]],standalone:!0,features:[R],decls:4,vars:1,consts:[[1,"w-full","h-full",2,"min-height","400px"],[1,"flex","flex-column","align-items-center","justify-content-center","p-6","gap-3","text-500"],[1,"pi","pi-spin","pi-spinner","text-4xl"],[1,"flex","flex-column","align-items-center","justify-content-center","p-6","gap-3","text-400"],[1,"pi","pi-history","text-5xl","opacity-50"],[1,"px-2","py-4"],["align","left","styleClass","w-full",3,"value"],["pTemplate","marker"],["pTemplate","content"],[1,"custom-marker","shadow-2",3,"ngClass"],[1,"surface-card","border-1","border-200","border-round","p-3","mb-3","shadow-1"],[1,"flex","justify-content-between","align-items-start","mb-2"],[1,"block","font-bold","text-900","text-sm"],[1,"text-xs","text-500","flex","align-items-center","gap-1","mt-1"],[1,"pi","pi-user"],[1,"text-right"],[1,"block","text-xs","font-bold","text-700"],[1,"text-xs","text-500"],[1,"surface-50","border-round","p-2","mt-2"],[1,"grid","grid-nogutter","text-xs","font-bold","text-500","mb-1","px-2"],[1,"col-4"],[1,"col-4","text-center"],[1,"col-4","text-right"],[1,"flex","flex-column","gap-1"],[1,"grid","grid-nogutter","text-sm","px-2","py-1","border-bottom-1","surface-border"],[1,"col-4","font-medium","text-700"],[1,"col-4","text-center","text-red-400"],[1,"col-4","text-right","font-bold","text-green-600"]],template:function(i,r){i&1&&(l(0,"div",0),c(1,ge,4,0,"div",1)(2,xe,4,0)(3,Te,4,1),a()),i&2&&(o(),I(1,r.loading()?1:r.events().length===0?2:3))},dependencies:[b,T,ie,te,S,Z,X,ee],styles:[".custom-marker[_ngcontent-%COMP%]{display:flex;width:2rem;height:2rem;align-items:center;justify-content:center;color:#fff;border-radius:50%;z-index:1}  .p-timeline-event-content{padding-bottom:2rem}  .p-timeline-event-opposite{flex:0;padding:0!important}"]})}}return e})();export{Ne as ProductHistoryComponent};
