import{a as H}from"./chunk-PQQ574MO.js";import{c as L}from"./chunk-T26EDPES.js";import{a as J}from"./chunk-VIPOSM3L.js";import{A as V,B as q,l as z,m as M,o as D,p as N,t as $,u as O,z as R}from"./chunk-XMT4O3ZM.js";import"./chunk-KPE55YBA.js";import"./chunk-BJPTUB5O.js";import"./chunk-KYDUYTIP.js";import{e as A}from"./chunk-7SUATJJ7.js";import"./chunk-VBIUCSSG.js";import{d as x,e as E}from"./chunk-VM2VQ54Q.js";import"./chunk-XS3SIB2S.js";import"./chunk-J5JKHS5Y.js";import{g as f,k as h}from"./chunk-ZRCCIHOC.js";import{g as B,h as j,j as F}from"./chunk-RXSAQ4RI.js";import{Aa as u,Bb as w,C as y,Pb as G,Qb as I,Sa as _,Ta as C,Ub as k,Va as m,W as a,X as s,d as g,db as S,eb as b,ia as c,q as P,ta as d,ua as l,va as v,yb as T}from"./chunk-RH3Q74CP.js";var U=()=>["step/general"],W=()=>[],X=()=>[10,20,50],_e=(()=>{class p{constructor(e,i,t,o,r,K){this.router=e,this.confirmationService=i,this.gendersService=t,this.loadingService=o,this.messageService=r,this.productsService=K,this.columns=[{header:"#",field:"id",clickable:!1,image:!1,money:!1},{header:"G\xE9nero",field:"gender",clickable:!1,image:!1,money:!1},{header:"Nombre",field:"name",clickable:!1,image:!1,money:!1},{header:"Stock",field:"stock",clickable:!1,image:!1,money:!1},{header:"Acci\xF3n",field:"button",clickable:!1,image:!1,money:!1}],this.limit=10,this.page=1,this.name="",this.callToAction=[{type:"button",size:"small",icon:"pi pi-pencil",outlined:!0,pTooltip:"Editar",tooltipPosition:"bottom",click:n=>this.editProductButton(n.id)},{type:"button",size:"small",icon:"pi pi-tag",outlined:!0,pTooltip:"Tallas",tooltipPosition:"bottom",click:n=>this.sizeProductButton(n.id)},{type:"button",size:"small",icon:"pi pi-palette",outlined:!0,pTooltip:"Colores",tooltipPosition:"bottom",click:n=>this.colorProductButton(n.id)},{type:"button",size:"small",icon:"pi pi-shop",outlined:!0,pTooltip:"Ecommerce",tooltipPosition:"bottom",click:n=>this.ecommerceProductButton(n.id)},{type:"button",size:"small",icon:"pi pi-trash",outlined:!0,pTooltip:"Eliminar",tooltipPosition:"bottom",click:(n,Q)=>this.deleteProductButton(n.id,Q)}],this.genders=[],this.selectedGenderIds=[],this.formGroup=new j({search:new F(null)})}ngOnInit(){this.getProducts(this.limit,this.page,this.name),this.formGroup.get("search")?.valueChanges.pipe(P(600)).subscribe(e=>{this.name=e||"",this.loadingService.sendLoadingState(!0),this.getProducts(this.limit,this.page,this.name)}),this.gendersService.getAll().subscribe(e=>{this.genders=e})}selectFilter(e){this.selectedGenderIds.push(e)}clearFilter(){this.name="",this.loadingService.sendLoadingState(!0),this.formGroup.get("search")?.setValue("")}handleGenderSelection(e){this.selectedGenderIds=e,this.loadingService.sendLoadingState(!0),this.getProducts(this.limit,1,this.name,this.selectedGenderIds)}getProducts(){return g(this,arguments,function*(e=this.limit,i=this.page,t=this.name,o=this.selectedGenderIds){this.updatePage(i),this.productsService.callGetList(e,i,t,o).subscribe(),setTimeout(()=>{this.loadingService.sendLoadingState(!1)},600)})}onPageSelected(e){return g(this,null,function*(){this.updatePage((e.page??0)+1),this.getProducts(e.rows,this.page)})}get products(){return this.productsService.getList()}get total(){return this.productsService.getTotal()}addProductButton(){this.router.navigate(["/inventories/products/create/general"])}editProductButton(e){this.router.navigate([`/inventories/products/step/general/${e}`])}sizeProductButton(e){this.router.navigate([`/inventories/products/sizes/${e}`])}colorProductButton(e){this.router.navigate([`/inventories/products/colors/${e}`])}ecommerceProductButton(e){this.router.navigate([`/inventories/products/ecommerce/${e}`])}deleteProductButton(e,i){this.confirmationService.confirm({target:i.target,message:"Deseas eliminar este producto?",header:"Eliminar producto",icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-danger p-button-text",rejectButtonStyleClass:"p-button-text p-button-text",acceptIcon:"none",rejectIcon:"none",acceptLabel:"S\xED",rejectLabel:"No",accept:()=>{this.productsService.delete(e).subscribe({next:()=>$(this.messageService,"El producto ha sido eliminado"),error:()=>O(this.messageService,"No se elemin\xF3 el producto, intentel\xF3 nuevamente")})},reject:()=>{}})}updatePage(e){this.page=e}static{this.\u0275fac=function(i){return new(i||p)(s(G),s(f),s(H),s(D),s(h),s(J))}}static{this.\u0275cmp=y({type:p,selectors:[["app-products"]],standalone:!0,features:[_([f,L,h]),C],decls:14,vars:19,consts:[[1,"card"],[1,"flex","flex-column","md:flex-row","align-items-center","justify-content-between","gap-3","mt-3","w-full"],[1,"w-full","md:w-4","flex","justify-content-start","flex-order-2","md:flex-order-1"],["controlName","search",1,"w-full",3,"clearFilter","formGroup"],[1,"w-full","md:w-auto","flex","flex-wrap","justify-content-center","gap-2","flex-order-3","md:flex-order-2"],[3,"selectionChange","collection","selectedIds"],[1,"w-full","md:w-4","flex","justify-content-center","md:justify-content-end","flex-order-1","md:flex-order-3"],["styleClass","w-full md:w-auto",3,"routerLink","outlined"],[1,"pi","pi-plus",2,"font-size","1rem"],[3,"paginateSelected","data","columns","callToAction","cellToAction","total","limit","rowsPerPageOptions"]],template:function(i,t){if(i&1&&(d(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-input-search",3),u("clearFilter",function(){return t.clearFilter()}),l()(),d(4,"div",4)(5,"app-input-filter",5),u("selectionChange",function(r){return t.handleGenderSelection(r)}),l()(),d(6,"div",6)(7,"p-button",7),v(8,"i",8),l()()(),d(9,"app-table-pagination",9),S(10,"async"),S(11,"async"),u("paginateSelected",function(r){return t.onPageSelected(r)}),l(),v(12,"p-toast")(13,"p-confirmDialog"),l()),i&2){let o,r;a(3),c("formGroup",t.formGroup),a(2),c("collection",t.genders)("selectedIds",t.selectedGenderIds),a(2),c("routerLink",m(16,U))("outlined",!0),a(2),c("data",(o=b(10,12,t.products))!==null&&o!==void 0?o:m(17,W))("columns",t.columns)("callToAction",t.callToAction)("cellToAction",t.cellToAction)("total",(r=b(11,14,t.total))!==null&&r!==void 0?r:0)("limit",t.limit)("rowsPerPageOptions",m(18,X))}},dependencies:[w,T,M,z,A,k,I,q,B,N,R,V,E,x],styles:[".btn-menu{background-color:#dfe3e8;border:1px solid #dfe3e8;color:#475569;border-radius:5px;height:39px}  .btn-selected{background-color:#75787b;color:#fff}  .h-custom{height:37px}"]})}}return p})();export{_e as ProductListComponent};
