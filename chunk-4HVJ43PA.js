import{a as L,b as V}from"./chunk-AH4J4TUG.js";import{A as J,a as k,b as q}from"./chunk-CWERYKP4.js";import{d as H}from"./chunk-WGZSWDGW.js";import{d as v}from"./chunk-UUMPVQ5Y.js";import{d as A,e as E}from"./chunk-NNPW6EYQ.js";import{d as C,g as _,l as M,o as O,t as N,v as R}from"./chunk-A2T6BYCT.js";import{Aa as G,Ab as B,Ba as b,C as I,I as x,J as $,Ta as F,W as y,X as a,g as c,ga as D,ia as f,l as d,oa as j,q as m,s as o,ta as z,ua as S,va as p,w as u,z as h,za as w}from"./chunk-JVTAFNDW.js";var P=(()=>{class t{constructor(e){this.apiService=e,this.sizes=[],this.sizes$=new c(this.sizes)}callGetList(e,i){let s=`sizes/selected?productId=${e}`;return i instanceof Array&&i.length>0&&(s+=`&sizeTypeId=${i}`),this.apiService.get(s).pipe(m(600),d(r=>{this.updateSizes(r)}))}getList(){return this.sizes$.asObservable()}create(e,i,s){return this.apiService.post("sizes",e).pipe(o(()=>this.callGetList(i,s)))}getSizeTypes(){return this.apiService.get("size-types")}updateSizes(e){this.sizes=e,this.sizes$.next(this.sizes)}static{this.\u0275fac=function(i){return new(i||t)(h(v))}}static{this.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Q=(()=>{class t{constructor(e){this.apiService=e,this.sizes=[],this.sizes$=new c(this.sizes),this.total=0,this.total$=new c(this.total)}callGetList(e=10,i=1,s="",r=[]){let n=`sizes?limit=${e}&page=${i}`;return s&&(n+=`&search=${s}`),r instanceof Array&&r.length>0&&(n+=`&sizeTypeId=${r}`),this.apiService.get(n).pipe(m(600),d(T=>{this.updateSizes(T.data),this.updateTotalSizes(T.paginate.total)}))}getList(){return this.sizes$.asObservable()}getTotal(){return this.total$.asObservable()}create(e){return this.apiService.post("sizes",e).pipe(o(()=>this.callGetList()))}delete(e){return this.apiService.delete(`sizes/${e}`).pipe(o(()=>this.callGetList()))}edit(e,i){return this.apiService.patch(`sizes/${e}`,i).pipe(o(()=>this.callGetList()))}getOne(e){return this.apiService.get(`sizes/${e}`)}updateSizes(e){this.sizes=e,this.sizes$.next(this.sizes)}updateTotalSizes(e){this.total=e,this.total$.next(this.total)}static{this.\u0275fac=function(i){return new(i||t)(h(v))}}static{this.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var g=class{constructor(l){this.id=l.id,this.description=l.description,this.sizeTypeId=l.sizeTypeId}};function Y(t,l){if(t&1){let e=w();z(0,"form",1),G("ngSubmit",function(){x(e);let s=b();return $(s.saveSizeButton())}),z(1,"div",2)(2,"div",3),p(3,"app-input-select",4),S(),z(4,"div",3),p(5,"app-input-text",5),S(),p(6,"button",6),S()()}if(t&2){let e=b();f("formGroup",e.form),y(3),f("options",e.sizesType),y(3),f("disabled",!e.isValid)}}var ue=(()=>{class t{constructor(e,i,s,r,n){this.formBuilder=e,this.sizesSelectedService=i,this.sizesService=s,this.dynamicDialogConfig=r,this.dynamicDialogRef=n,this.productId=0,this.sizeTypeId=0,this.sizesType=[],this.form=this.formBuilder.group({id:[null],description:["",C.required],sizeTypeId:[1,C.required]})}ngOnInit(){if(this.dynamicDialogConfig.data.id){let e=this.dynamicDialogConfig.data.id;this.sizeTypeId=this.dynamicDialogConfig.data.id,this.sizesService.getOne(e).subscribe(i=>{this.form.patchValue(i)})}this.sizesSelectedService.getSizeTypes().subscribe({next:e=>{this.sizesType=e}})}get isValid(){return this.form.valid}saveSizeButton(){if(this.form){let e=new g(this.form.value);if(this.dynamicDialogConfig.data.id){let i=this.dynamicDialogConfig.data.id;this.sizesService.edit(i,e).subscribe({next:()=>this.dynamicDialogRef.close({success:!0}),error:()=>{}})}else this.sizesService.create(e).subscribe({next:()=>this.dynamicDialogRef.close({success:!0}),error:()=>{}})}}static{this.\u0275fac=function(i){return new(i||t)(a(N),a(P),a(Q),a(L),a(V))}}static{this.\u0275cmp=I({type:t,selectors:[["app-sizes-form"]],standalone:!0,features:[F],decls:2,vars:1,consts:[[3,"formGroup"],[3,"ngSubmit","formGroup"],[1,"p-fluid","p-formgrid","grid"],[1,"col-12"],["placeholder","Seleccione tipo de talla","label","Tipo de talla","controlName","sizeTypeId","for","sizeTypeId","id","sizeTypeId","optionLabel","description","optionValue","id",3,"options"],["placeholder","Ingrese talla","label","Talla","controlName","description"],["type","submit","pButton","","label","Guardar",3,"disabled"]],template:function(i,s){i&1&&(D(0,Y,7,3,"form",0),p(1,"p-toast")),i&2&&j(0,s.form?0:-1)},dependencies:[B,R,M,_,O,E,A,J,H,q,k]})}}return t})();export{P as a,Q as b,ue as c};
