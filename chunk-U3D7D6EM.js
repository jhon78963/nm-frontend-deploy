import{d as u}from"./chunk-NELNUKEX.js";import{d as h}from"./chunk-BQWNWUNE.js";import{A as s,M as n,O as i,S as c,X as o,n as a}from"./chunk-UISEBZIM.js";var g=(()=>{class r{constructor(t,e){this.apiService=t,this.router=e}setAuthentication(t){return localStorage.setItem("tokenData",JSON.stringify(t)),!0}setUserData(t){localStorage.setItem("user",JSON.stringify(t))}setRefreshData(t){localStorage.setItem("tokenData",JSON.stringify(t))}login(t){return this.apiService.post("auth/login",t).pipe(i(e=>this.setAuthentication(e)),n(()=>this.me()),i(e=>{this.setUserData(e),this.router.navigateByUrl("/")}),s(e=>a(()=>e.error.message)))}me(){return this.apiService.post("auth/me",{})}logout(t,e){return this.apiService.post("auth/logout",{refreshToken:t,accessToken:e})}refreshToken(t,e){return this.apiService.post("auth/refresh-token",{refreshToken:t,accessToken:e})}static{this.\u0275fac=function(e){return new(e||r)(o(u),o(h))}}static{this.\u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{g as a};
