import{d as n}from"./chunk-NELNUKEX.js";import{M as s,S as p,Y as c,j as a,r as o}from"./chunk-UISEBZIM.js";var b=(()=>{class e{constructor(){this.apiService=c(n),this.apiUrl="cash-flow",this.reportSubject=new a({lists:{sales:[],incomes:[],expenses:[]},summary:{opening_balance:100,final_balance:0}}),this.report$=this.reportSubject.asObservable()}loadDailyReport(t){let r=`${this.apiUrl}/daily?date=${t}`;return this.apiService.get(r).pipe(o(i=>{i.success&&this.updateReport(i.data)}))}getReport(){return this.report$}registerMovement(t,r){return this.apiService.post(this.apiUrl,t).pipe(s(()=>this.loadDailyReport(r)))}registerSummaryMovement(t){return this.apiService.post(this.apiUrl,t)}updateReport(t){this.reportSubject.next(t)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{b as a};
