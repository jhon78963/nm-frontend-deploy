import{a as W,b as T}from"./chunk-UD4U4WBQ.js";import{c as f}from"./chunk-ODTFD3QQ.js";import"./chunk-TVFTUAXU.js";import{e as z,f as x,h as N,i as O,m as h,n as _,o as H,s as R,u as V}from"./chunk-3362O3CL.js";import"./chunk-XQ5SMVZC.js";import"./chunk-A4YBSHQE.js";import"./chunk-ZRB5JYID.js";import"./chunk-R4EC5V5S.js";import"./chunk-DECUXDPT.js";import"./chunk-FTJNOPBC.js";import{e as I}from"./chunk-53BCAK53.js";import"./chunk-NELNUKEX.js";import{d as D,e as G}from"./chunk-KZGPV3OV.js";import"./chunk-6MWK2YGG.js";import"./chunk-MROZGMZP.js";import"./chunk-S23T3VNK.js";import"./chunk-ZSZR532A.js";import{g as E,h as k,j as A}from"./chunk-3IAGLYRS.js";import{g as d,k as u}from"./chunk-56NTXRTG.js";import{i as B}from"./chunk-BQWNWUNE.js";import"./chunk-LUKISEWT.js";import{Ab as p,C as w,Ra as a,Rc as F,Sa as s,Sb as P,Tb as j,Uc as L,Vb as v,ba as M,d as C,dc as b,ec as y,ib as c,tb as m,ub as l,vb as S}from"./chunk-UISEBZIM.js";var J=()=>[],K=()=>[10,20,50],Ce=(()=>{class n{constructor(e,t,i,o,r){this.dialogService=e,this.messageService=t,this.confirmationService=i,this.loadingService=o,this.colorsService=r,this.columns=[{header:"#",field:"id",clickable:!1,image:!1,money:!1,color:!1},{header:"Color",field:"description",clickable:!1,image:!1,money:!1,color:!1},{header:"Hash",field:"hash",clickable:!1,image:!1,money:!1,color:!0},{header:"Acci\xF3n",field:"button",clickable:!1,image:!1,money:!1,color:!1}],this.limit=10,this.page=1,this.search="",this.callToAction=[{type:"button",size:"small",icon:"pi pi-pencil",outlined:!0,pTooltip:"Editar",tooltipPosition:"bottom",click:g=>this.editColorButton(g.id)},{type:"button",size:"small",icon:"pi pi-trash",outlined:!0,pTooltip:"Eliminar",tooltipPosition:"bottom",click:(g,q)=>this.deleteColorButton(g.id,q)}],this.formGroup=new k({search:new A(null)})}ngOnInit(){this.getColors(this.limit,this.page,this.search),this.formGroup.get("search")?.valueChanges.pipe(w(600)).subscribe(e=>{this.search=e||"",this.loadingService.sendLoadingState(!0),this.getColors(this.limit,this.page,this.search)})}ngOnDestroy(){this.colorModal&&this.colorModal.close()}clearFilter(){this.search="",this.loadingService.sendLoadingState(!0),this.formGroup.get("search")?.setValue("")}getColors(){return C(this,arguments,function*(e=this.limit,t=this.page,i=this.search){this.updatePage(t),this.colorsService.callGetList(e,t,i).subscribe(),setTimeout(()=>{this.loadingService.sendLoadingState(!1)},600)})}onPageSelected(e){return C(this,null,function*(){this.updatePage((e.page??0)+1),this.getColors(e.rows,this.page)})}get sizes(){return this.colorsService.getList()}get total(){return this.colorsService.getTotal()}addColorButton(){this.colorModal=this.dialogService.open(T,{data:{},header:"Crear Color",styleClass:"dialog-custom-form"}),this.colorModal.onClose.subscribe({next:e=>{e&&e?.success?h(this.messageService,"Color Creado."):e?.error&&_(this.messageService,e?.error)}})}editColorButton(e){this.colorModal=this.dialogService.open(T,{data:{id:e},header:"Editar Color",styleClass:"dialog-custom-form"}),this.colorModal.onClose.subscribe({next:t=>{t&&t?.success?h(this.messageService,"Color actualizado."):t?.error&&_(this.messageService,t?.error)}})}deleteColorButton(e,t){this.confirmationService.confirm({target:t.target,message:"Deseas eliminar este color?",header:"Eliminar Color",icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-danger p-button-text",rejectButtonStyleClass:"p-button-text p-button-text",acceptIcon:"none",rejectIcon:"none",acceptLabel:"S\xED",rejectLabel:"No",accept:()=>{this.colorsService.delete(e).subscribe(()=>{h(this.messageService,"El color ha sido eliminada")})},reject:()=>{H(this.messageService,"No se realiz\xF3 ninguna acci\xF3n.")}})}updatePage(e){this.page=e}static{this.\u0275fac=function(t){return new(t||n)(s(f),s(u),s(d),s(N),s(W))}}static{this.\u0275cmp=M({type:n,selectors:[["app-colors"]],standalone:!0,features:[P([d,f,u]),j],decls:12,vars:15,consts:[[1,"card"],[1,"flex","flex-column","md:flex-row","align-items-center","justify-content-between","gap-3","mt-3","w-full"],[1,"w-full","md:w-4","flex","justify-content-start","flex-order-2","md:flex-order-1"],["controlName","search",1,"w-full",3,"clearFilter","formGroup"],[1,"w-full","md:w-4","flex","justify-content-center","md:justify-content-end","flex-order-1","md:flex-order-3"],[3,"click","outlined"],[1,"pi","pi-plus",2,"font-size","1rem"],[3,"paginateSelected","data","columns","callToAction","cellToAction","total","limit","rowsPerPageOptions"]],template:function(t,i){if(t&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-input-search",3),p("clearFilter",function(){return i.clearFilter()}),l()(),m(4,"div",4)(5,"p-button",5),p("click",function(){return i.addColorButton()}),S(6,"i",6),l()()(),m(7,"app-table-pagination",7),b(8,"async"),b(9,"async"),p("paginateSelected",function(r){return i.onPageSelected(r)}),l(),S(10,"p-toast")(11,"p-confirmDialog"),l()),t&2){let o,r;a(3),c("formGroup",i.formGroup),a(2),c("outlined",!0),a(2),c("data",(o=y(8,9,i.sizes))!==null&&o!==void 0?o:v(13,J))("columns",i.columns)("callToAction",i.callToAction)("cellToAction",i.cellToAction)("total",(r=y(9,11,i.total))!==null&&r!==void 0?r:0)("limit",i.limit)("rowsPerPageOptions",v(14,K))}},dependencies:[L,F,G,D,x,z,I,V,E,O,R,B]})}}return n})();export{Ce as ColorListComponent};
