import{d as n}from"./chunk-NELNUKEX.js";import{C as u,M as h,S as d,X as l,j as o,r as p}from"./chunk-UISEBZIM.js";var m=(()=>{class e{constructor(t){this.apiService=t,this.products=[],this.products$=new o(this.products),this.total=0,this.total$=new o(this.total)}callGetList(t=10,i=1,a="",r=[]){let s=`products?limit=${t}&page=${i}`;return a&&(s+=`&search=${a}`),r&&r.length>0&&(s+=`&genderId=${r}`),this.apiService.get(s).pipe(u(600),p(c=>{this.updateProducts(c.data),this.updateTotalProducts(c.paginate.total)}))}getList(){return this.products$.asObservable()}getTotal(){return this.total$.asObservable()}create(t){return this.apiService.post("products",t)}delete(t){return this.apiService.delete(`products/${t}`).pipe(h(()=>this.callGetList()))}edit(t,i){return this.apiService.patch(`products/${t}`,i)}getOne(t){return this.apiService.get(`products/${t}`)}getHistory(t){return this.apiService.get(`products/${t}/history`)}updateProducts(t){this.products=t,this.products$.next(this.products)}updateTotalProducts(t){this.total=t,this.total$.next(this.total)}static{this.\u0275fac=function(i){return new(i||e)(l(n))}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{m as a};
