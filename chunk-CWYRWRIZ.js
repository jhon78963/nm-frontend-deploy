import{b as rt}from"./chunk-XBZXNI6U.js";import{c as G}from"./chunk-T26EDPES.js";import{f as Ye,g as qe,h as Ke,i as Je,q as et,r as tt,t as it,u as ot}from"./chunk-XMT4O3ZM.js";import"./chunk-KPE55YBA.js";import{g as Ue,h as $e}from"./chunk-BJPTUB5O.js";import{a as Ge,b as Ne}from"./chunk-KYDUYTIP.js";import{a as Xe,b as Qe,d as Ze,f as We}from"./chunk-7SUATJJ7.js";import{d as ke}from"./chunk-VBIUCSSG.js";import"./chunk-VM2VQ54Q.js";import"./chunk-XS3SIB2S.js";import{c as be,d as Y,f as q,h as K}from"./chunk-J5JKHS5Y.js";import{a as V,b as xe,e as A,k as j,l as Me,m as Te,p as Ie,r as J,t as Ee,u as Ve}from"./chunk-ZRCCIHOC.js";import{a as He,b as De,f as ze,g as Le,h as Fe,j as Re,k as Be,o as Pe,p as Oe,u as Ae,v as je}from"./chunk-RXSAQ4RI.js";import{Aa as g,B as T,Ba as a,Bb as O,C as H,Cb as _e,D as re,Ea as ue,Ha as k,I as d,Ia as x,J as u,Ja as M,La as _,Ma as $,Na as Z,Nb as Se,P as ne,Pa as L,Pb as we,Q as D,Qa as F,Qb as ye,R as se,Ra as R,Sa as B,Ta as pe,Va as W,W as c,Wa as I,X as C,Xa as P,aa as le,fa as ae,ga as y,ha as S,i as N,ia as f,ja as ce,jb as he,kb as E,la as de,lb as me,m as X,ma as z,oa as U,p as Q,rb as fe,sb as ge,ta as s,ua as n,v as ee,va as v,vb as Ce,w as te,wb as ve,x as ie,z as oe,za as w}from"./chunk-RH3Q74CP.js";var dt=["container"],ut=["input"],pt=["colorSelector"],ht=["colorHandle"],mt=["hue"],ft=["hueHandle"],gt=(r,h)=>({"p-colorpicker p-component":!0,"p-colorpicker-overlay":r,"p-colorpicker-dragging":h}),Ct=r=>({"p-disabled":r}),vt=(r,h)=>({"p-colorpicker-panel":!0,"p-colorpicker-overlay-panel":r,"p-disabled":h}),_t=(r,h)=>({showTransitionParams:r,hideTransitionParams:h}),bt=r=>({value:"visible",params:r});function St(r,h){if(r&1){let e=w();s(0,"input",9,1),g("click",function(){d(e);let i=a();return u(i.onInputClick())})("keydown",function(i){d(e);let o=a();return u(o.onInputKeydown(i))})("focus",function(){d(e);let i=a();return u(i.onInputFocus())}),n()}if(r&2){let e=a();ce("background-color",e.inputBgColor),f("ngClass",I(9,Ct,e.disabled))("disabled",e.disabled)("autofocus",e.autofocus),S("tabindex",e.tabindex)("id",e.inputId)("data-pc-section","input")("aria-label",e.ariaLabel)}}function wt(r,h){if(r&1){let e=w();s(0,"div",10),g("click",function(i){d(e);let o=a();return u(o.onOverlayClick(i))})("@overlayAnimation.start",function(i){d(e);let o=a();return u(o.onOverlayAnimationStart(i))})("@overlayAnimation.done",function(i){d(e);let o=a();return u(o.onOverlayAnimationEnd(i))}),s(1,"div",11)(2,"div",12,2),g("touchstart",function(i){d(e);let o=a();return u(o.onColorDragStart(i))})("touchmove",function(i){d(e);let o=a();return u(o.onDrag(i))})("touchend",function(){d(e);let i=a();return u(i.onDragEnd())})("mousedown",function(i){d(e);let o=a();return u(o.onColorMousedown(i))}),s(4,"div",13),v(5,"div",14,3),n()(),s(7,"div",15,4),g("mousedown",function(i){d(e);let o=a();return u(o.onHueMousedown(i))})("touchstart",function(i){d(e);let o=a();return u(o.onHueDragStart(i))})("touchmove",function(i){d(e);let o=a();return u(o.onDrag(i))})("touchend",function(){d(e);let i=a();return u(i.onDragEnd())}),v(9,"div",16,5),n()()()}if(r&2){let e=a();f("ngClass",P(10,vt,!e.inline,e.disabled))("@overlayAnimation",I(16,bt,P(13,_t,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",e.inline===!0),S("data-pc-section","panel"),c(),S("data-pc-section","content"),c(),S("data-pc-section","selector"),c(2),S("data-pc-section","color"),c(),S("data-pc-section","colorHandle"),c(2),S("data-pc-section","hue"),c(2),S("data-pc-section","hueHandle")}}var yt={provide:He,useExisting:ee(()=>kt),multi:!0},kt=(()=>{class r{document;platformId;el;renderer;cd;config;overlayService;style;styleClass;inline;format="hex";appendTo;disabled;tabindex;inputId;autoZIndex=!0;baseZIndex=0;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";autofocus;onChange=new D;onShow=new D;onHide=new D;containerViewChild;inputViewChild;value={h:0,s:100,b:100};inputBgColor;shown;overlayVisible;defaultColor="ff0000";onModelChange=()=>{};onModelTouched=()=>{};documentClickListener;documentResizeListener;documentMousemoveListener;documentMouseupListener;documentHueMoveListener;scrollHandler;selfClick;colorDragging;hueDragging;overlay;colorSelectorViewChild;colorHandleViewChild;hueViewChild;hueHandleViewChild;window;constructor(e,t,i,o,l,m,p){this.document=e,this.platformId=t,this.el=i,this.renderer=o,this.cd=l,this.config=m,this.overlayService=p,this.window=this.document.defaultView}set colorSelector(e){this.colorSelectorViewChild=e}set colorHandle(e){this.colorHandleViewChild=e}set hue(e){this.hueViewChild=e}set hueHandle(e){this.hueHandleViewChild=e}get ariaLabel(){return this.config?.getTranslation(J.ARIA)[J.SELECT_COLOR]}onHueMousedown(e){this.disabled||(this.bindDocumentMousemoveListener(),this.bindDocumentMouseupListener(),this.hueDragging=!0,this.pickHue(e))}onHueDragStart(e){this.disabled||(this.hueDragging=!0,this.pickHue(e,e.changedTouches[0]))}onColorDragStart(e){this.disabled||(this.colorDragging=!0,this.pickColor(e,e.changedTouches[0]))}pickHue(e,t){let i=t?t.pageY:e.pageY,o=this.hueViewChild?.nativeElement.getBoundingClientRect().top+(this.document.defaultView.pageYOffset||this.document.documentElement.scrollTop||this.document.body.scrollTop||0);this.value=this.validateHSB({h:Math.floor(360*(150-Math.max(0,Math.min(150,i-o)))/150),s:this.value.s,b:this.value.b}),this.updateColorSelector(),this.updateUI(),this.updateModel(),this.onChange.emit({originalEvent:e,value:this.getValueToUpdate()})}onColorMousedown(e){this.disabled||(this.bindDocumentMousemoveListener(),this.bindDocumentMouseupListener(),this.colorDragging=!0,this.pickColor(e))}onDrag(e){this.colorDragging&&(this.pickColor(e,e.changedTouches[0]),e.preventDefault()),this.hueDragging&&(this.pickHue(e,e.changedTouches[0]),e.preventDefault())}onDragEnd(){this.colorDragging=!1,this.hueDragging=!1,this.unbindDocumentMousemoveListener(),this.unbindDocumentMouseupListener()}pickColor(e,t){let i=t?t.pageX:e.pageX,o=t?t.pageY:e.pageY,l=this.colorSelectorViewChild?.nativeElement.getBoundingClientRect(),m=l.top+(this.document.defaultView.pageYOffset||this.document.documentElement.scrollTop||this.document.body.scrollTop||0),p=l.left+this.document.body.scrollLeft,b=Math.floor(100*Math.max(0,Math.min(150,i-p))/150),at=Math.floor(100*(150-Math.max(0,Math.min(150,o-m)))/150);this.value=this.validateHSB({h:this.value.h,s:b,b:at}),this.updateUI(),this.updateModel(),this.onChange.emit({originalEvent:e,value:this.getValueToUpdate()})}getValueToUpdate(){let e;switch(this.format){case"hex":e="#"+this.HSBtoHEX(this.value);break;case"rgb":e=this.HSBtoRGB(this.value);break;case"hsb":e=this.value;break}return e}updateModel(){this.onModelChange(this.getValueToUpdate()),this.cd.markForCheck()}writeValue(e){if(e)switch(this.format){case"hex":this.value=this.HEXtoHSB(e);break;case"rgb":this.value=this.RGBtoHSB(e);break;case"hsb":this.value=e;break}else this.value=this.HEXtoHSB(this.defaultColor);setTimeout(()=>{this.updateColorSelector(),this.updateUI(),this.cd.markForCheck()})}updateColorSelector(){if(this.colorSelectorViewChild){let e={};e.s=100,e.b=100,e.h=this.value.h,this.colorSelectorViewChild.nativeElement.style.backgroundColor="#"+this.HSBtoHEX(e)}}updateUI(){this.colorHandleViewChild&&this.hueHandleViewChild?.nativeElement&&(this.colorHandleViewChild.nativeElement.style.left=Math.floor(150*this.value.s/100)+"px",this.colorHandleViewChild.nativeElement.style.top=Math.floor(150*(100-this.value.b)/100)+"px",this.hueHandleViewChild.nativeElement.style.top=Math.floor(150-150*this.value.h/360)+"px"),this.inputBgColor="#"+this.HSBtoHEX(this.value)}onInputFocus(){this.onModelTouched()}show(){this.overlayVisible=!0,this.cd.markForCheck()}onOverlayAnimationStart(e){switch(e.toState){case"visible":this.inline||(this.overlay=e.element,this.appendOverlay(),this.autoZIndex&&A.set("overlay",this.overlay,this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.updateColorSelector(),this.updateUI());break;case"void":this.onOverlayHide();break}}onOverlayAnimationEnd(e){switch(e.toState){case"visible":this.inline||this.onShow.emit({});break;case"void":this.autoZIndex&&A.clear(e.element),this.onHide.emit({});break}}appendOverlay(){this.appendTo&&(this.appendTo==="body"?this.renderer.appendChild(this.document.body,this.overlay):V.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.renderer.appendChild(this.el.nativeElement,this.overlay)}alignOverlay(){this.appendTo?V.absolutePosition(this.overlay,this.inputViewChild?.nativeElement):V.relativePosition(this.overlay,this.inputViewChild?.nativeElement)}hide(){this.overlayVisible=!1,this.cd.markForCheck()}onInputClick(){this.selfClick=!0,this.togglePanel()}togglePanel(){this.overlayVisible?this.hide():this.show()}onInputKeydown(e){switch(e.code){case"Space":this.togglePanel(),e.preventDefault();break;case"Escape":case"Tab":this.hide();break;default:break}}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement}),this.selfClick=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}bindDocumentClickListener(){if(!this.documentClickListener){let e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentClickListener=this.renderer.listen(e,"click",()=>{this.selfClick||(this.overlayVisible=!1,this.unbindDocumentClickListener()),this.selfClick=!1,this.cd.markForCheck()})}}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentMousemoveListener(){if(!this.documentMousemoveListener){let e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentMousemoveListener=this.renderer.listen(e,"mousemove",t=>{this.colorDragging&&this.pickColor(t),this.hueDragging&&this.pickHue(t)})}}unbindDocumentMousemoveListener(){this.documentMousemoveListener&&(this.documentMousemoveListener(),this.documentMousemoveListener=null)}bindDocumentMouseupListener(){if(!this.documentMouseupListener){let e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentMouseupListener=this.renderer.listen(e,"mouseup",()=>{this.colorDragging=!1,this.hueDragging=!1,this.unbindDocumentMousemoveListener(),this.unbindDocumentMouseupListener()})}}unbindDocumentMouseupListener(){this.documentMouseupListener&&(this.documentMouseupListener(),this.documentMouseupListener=null)}bindDocumentResizeListener(){_e(this.platformId)&&(this.documentResizeListener=this.renderer.listen(this.window,"resize",this.onWindowResize.bind(this)))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!V.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new xe(this.containerViewChild?.nativeElement,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}validateHSB(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}}validateRGB(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}}validateHEX(e){var t=6-e.length;if(t>0){for(var i=[],o=0;o<t;o++)i.push("0");i.push(e),e=i.join("")}return e}HEXtoRGB(e){let t=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return{r:t>>16,g:(t&65280)>>8,b:t&255}}HEXtoHSB(e){return this.RGBtoHSB(this.HEXtoRGB(e))}RGBtoHSB(e){var t={h:0,s:0,b:0},i=Math.min(e.r,e.g,e.b),o=Math.max(e.r,e.g,e.b),l=o-i;return t.b=o,t.s=o!=0?255*l/o:0,t.s!=0?e.r==o?t.h=(e.g-e.b)/l:e.g==o?t.h=2+(e.b-e.r)/l:t.h=4+(e.r-e.g)/l:t.h=-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t}HSBtoRGB(e){var t={r:0,g:0,b:0};let i=e.h,o=e.s*255/100,l=e.b*255/100;if(o==0)t={r:l,g:l,b:l};else{let m=l,p=(255-o)*l/255,b=(m-p)*(i%60)/60;i==360&&(i=0),i<60?(t.r=m,t.b=p,t.g=p+b):i<120?(t.g=m,t.b=p,t.r=m-b):i<180?(t.g=m,t.r=p,t.b=p+b):i<240?(t.b=m,t.r=p,t.g=m-b):i<300?(t.b=m,t.g=p,t.r=p+b):i<360?(t.r=m,t.g=p,t.b=m-b):(t.r=0,t.g=0,t.b=0)}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}}RGBtoHEX(e){var t=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];for(var i in t)t[i].length==1&&(t[i]="0"+t[i]);return t.join("")}HSBtoHEX(e){return this.RGBtoHEX(this.HSBtoRGB(e))}onOverlayHide(){this.unbindScrollListener(),this.unbindDocumentResizeListener(),this.unbindDocumentClickListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&this.autoZIndex&&A.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}static \u0275fac=function(t){return new(t||r)(C(fe),C(se),C(ne),C(le),C(he),C(Te),C(Me))};static \u0275cmp=H({type:r,selectors:[["p-colorPicker"]],viewQuery:function(t,i){if(t&1&&(k(dt,5),k(ut,5),k(pt,5),k(ht,5),k(mt,5),k(ft,5)),t&2){let o;x(o=M())&&(i.containerViewChild=o.first),x(o=M())&&(i.inputViewChild=o.first),x(o=M())&&(i.colorSelector=o.first),x(o=M())&&(i.colorHandle=o.first),x(o=M())&&(i.hue=o.first),x(o=M())&&(i.hueHandle=o.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",inline:[T.HasDecoratorInputTransform,"inline","inline",E],format:"format",appendTo:"appendTo",disabled:[T.HasDecoratorInputTransform,"disabled","disabled",E],tabindex:"tabindex",inputId:"inputId",autoZIndex:[T.HasDecoratorInputTransform,"autoZIndex","autoZIndex",E],baseZIndex:[T.HasDecoratorInputTransform,"baseZIndex","baseZIndex",me],showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",autofocus:[T.HasDecoratorInputTransform,"autofocus","autofocus",E]},outputs:{onChange:"onChange",onShow:"onShow",onHide:"onHide"},features:[B([yt]),ae],decls:4,vars:11,consts:[["container",""],["input",""],["colorSelector",""],["colorHandle",""],["hue",""],["hueHandle",""],[3,"ngStyle","ngClass"],["type","text","class","p-colorpicker-preview p-inputtext","readonly","readonly","pAutoFocus","",3,"ngClass","disabled","backgroundColor","autofocus","click","keydown","focus",4,"ngIf"],[3,"ngClass","click",4,"ngIf"],["type","text","readonly","readonly","pAutoFocus","",1,"p-colorpicker-preview","p-inputtext",3,"click","keydown","focus","ngClass","disabled","autofocus"],[3,"click","ngClass"],[1,"p-colorpicker-content"],[1,"p-colorpicker-color-selector",3,"touchstart","touchmove","touchend","mousedown"],[1,"p-colorpicker-color"],[1,"p-colorpicker-color-handle"],[1,"p-colorpicker-hue",3,"mousedown","touchstart","touchmove","touchend"],[1,"p-colorpicker-hue-handle"]],template:function(t,i){t&1&&(s(0,"div",6,0),y(2,St,2,11,"input",7)(3,wt,11,18,"div",8),n()),t&2&&(z(i.styleClass),f("ngStyle",i.style)("ngClass",P(8,gt,!i.inline,i.colorDragging||i.hueDragging)),S("data-pc-name","colorpicker")("data-pc-section","root"),c(2),f("ngIf",!i.inline),c(),f("ngIf",i.inline||i.overlayVisible))},dependencies:[ge,Ce,ve,Xe],styles:[`@layer primeng{.p-colorpicker{display:inline-block}.p-colorpicker-dragging{cursor:pointer}.p-colorpicker-overlay{position:relative}.p-colorpicker-panel{position:relative;width:193px;height:166px}.p-colorpicker-overlay-panel{position:absolute;top:0;left:0}.p-colorpicker-preview{cursor:pointer}.p-colorpicker-panel .p-colorpicker-content{position:relative}.p-colorpicker-panel .p-colorpicker-color-selector{width:150px;height:150px;top:8px;left:8px;position:absolute}.p-colorpicker-panel .p-colorpicker-color{width:150px;height:150px}.p-colorpicker-panel .p-colorpicker-color-handle{position:absolute;top:0;left:150px;border-radius:100%;width:10px;height:10px;border-width:1px;border-style:solid;margin:-5px 0 0 -5px;cursor:pointer;opacity:.85}.p-colorpicker-panel .p-colorpicker-hue{width:17px;height:150px;top:8px;left:167px;position:absolute;opacity:.85}.p-colorpicker-panel .p-colorpicker-hue-handle{position:absolute;top:150px;left:0;width:21px;margin-left:-2px;margin-top:-5px;height:10px;border-width:2px;border-style:solid;opacity:.85;cursor:pointer}}
`],encapsulation:2,data:{animation:[be("overlayAnimation",[K(":enter",[q({opacity:0,transform:"scaleY(0.8)"}),Y("{{showTransitionParams}}")]),K(":leave",[Y("{{hideTransitionParams}}",q({opacity:0}))])])]},changeDetection:0})}return r})(),st=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=re({type:r});static \u0275inj=ie({imports:[O,Qe]})}return r})();var lt=(()=>{class r{constructor(e){this.apiService=e}add(e,t,i){return this.apiService.post(`product-size/${e}/color/${t}`,i)}remove(e,t){return this.apiService.delete(`product-size/${e}/color/${t}`)}update(e,t,i){return this.apiService.patch(`product-size/${e}/color/${t}`,i)}getSizes(e,t){let i=`colors/sizes?productId=${e}`;return t&&(i+=`&size=${t}`),this.apiService.get(i)}getColors(e,t){return this.apiService.get(`colors/selected?productId=${e}&sizeId=${t}`)}static{this.\u0275fac=function(t){return new(t||r)(oe(ke))}}static{this.\u0275prov=te({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Mt=()=>["/inventories/products"],Tt=()=>({"min-width":"50rem"}),It=r=>({"background-color":r,"border-radius":"50%",border:"1px solid #d4d6d9",width:"2rem",height:"2rem"});function Et(r,h){if(r&1){let e=w();s(0,"div",16)(1,"div",17),g("click",function(i){return d(e),u(i.stopPropagation())}),s(2,"span",18),v(3,"i",19),n(),v(4,"input",20),n(),s(5,"button",21),g("click",function(){d(e);let i=a();return u(i.resetFunction())}),n()()}if(r&2){let e=a();c(),f("formGroup",e.formGroup)}}function Vt(r,h){if(r&1&&(s(0,"div",22)(1,"div"),_(2),n()()),r&2){let e=h.$implicit;c(2),$(e.description)}}function Ht(r,h){if(r&1&&(s(0,"div",22)(1,"div"),_(2),n()()),r&2){let e=h.$implicit;c(2),$(e.description)}}function Dt(r,h){r&1&&(s(0,"tr")(1,"th",26),v(2,"p-tableHeaderCheckbox"),n(),s(3,"th"),_(4,"#"),n(),s(5,"th"),_(6,"Color"),n(),s(7,"th"),_(8,"Hash"),n(),s(9,"th"),_(10,"Stock"),n(),v(11,"th"),n())}function zt(r,h){if(r&1){let e=w();s(0,"button",35),g("click",function(){d(e);let i=a().$implicit,o=a(2);return u(o.removeColorSizeProductButton(i))}),n()}}function Lt(r,h){if(r&1){let e=w();s(0,"tr")(1,"td"),v(2,"p-tableCheckbox",27),n(),s(3,"td",28)(4,"span",29),_(5,"Code"),n(),_(6),n(),s(7,"td",28)(8,"span",29),_(9,"Name"),n(),_(10),n(),s(11,"td",28)(12,"span",29),_(13,"Name"),n(),v(14,"div"),n(),s(15,"td",28)(16,"div",30)(17,"input",31),R("ngModelChange",function(i){let o=d(e).$implicit;return F(o.stock,i)||(o.stock=i),u(i)}),g("keyup",function(){let i=d(e).$implicit,o=a(2);return u(o.selectColor(i))}),n()()(),s(18,"td")(19,"div",32)(20,"button",33),g("click",function(){let i=d(e).$implicit,o=a(2);return u(i.isExists?o.editColorSizeProductButton(i):o.saveColorSizeProductButton(i))}),n(),y(21,zt,1,0,"button",34),n()()()}if(r&2){let e=h.$implicit;c(2),f("value",e),c(4),Z(" ",e.id," "),c(4),Z(" ",e.description," "),c(4),de(I(9,It,e.hash)),c(3),ue("value",e.stock),L("ngModel",e.stock),c(3),f("icon",e.isExists?"pi pi-pencil":"pi pi-save"),c(),U(21,e.isExists?21:-1)}}function Ft(r,h){if(r&1){let e=w();s(0,"p-table",23,0),R("selectionChange",function(i){d(e);let o=a();return F(o.selectedColors,i)||(o.selectedColors=i),u(i)}),y(2,Dt,12,0,"ng-template",24)(3,Lt,22,11,"ng-template",25),n()}if(r&2){let e=a();f("value",e.colors)("tableStyle",W(3,Tt)),L("selection",e.selectedColors)}}var Mi=(()=>{class r{constructor(e,t,i,o,l){this.router=e,this.route=t,this.dialogService=i,this.messageService=o,this.productSizeColorsService=l,this.productId=0,this.sizes=[],this.colors=[],this.selectedColors=[],this.stepper=!0,this.formGroup=new Fe({size:new Re}),this.route.snapshot.paramMap.get("id")&&(this.productId=Number(this.route.snapshot.paramMap.get("id")),this.stepper=this.router.url.includes("/step/"))}ngOnInit(){this.getSizes(),this.loadColors(),this.formGroup.get("size")?.valueChanges.subscribe(e=>{this.getSizes(e)})}loadColors(){let e=JSON.parse(localStorage.getItem("selectedSize"));e&&e.productId==this.productId?(this.selectedSize={id:e.id,productSizeId:e.productSizeId,description:e.description,stock:e.stock},this.getColors(this.selectedSize.id)):localStorage.removeItem("selectedSize")}getSizes(e){this.productSizeColorsService.getSizes(this.productId,e).subscribe({next:t=>{this.sizes=t}})}getColors(e){this.productSizeColorsService.getColors(this.productId,e).subscribe({next:t=>{this.colors=t}})}getSelectedSize(e){e.value?(e.value.productId=this.productId,localStorage.setItem("selectedSize",JSON.stringify(e.value)),this.getColors(e.value.id)):(this.messageService.clear(),this.colors=[])}resetFunction(){this.getSizes(),this.formGroup.get("size")?.patchValue("")}selectColor(e){let t=this.selectedSize.stock,i=this.selectedColors.reduce((p,b)=>p+Number(b.stock||0),0),o=this.selectedColors.find(p=>p.id===e.id),l=Number(e.stock||0);if(!e.stock?.toString().trim()){this.selectedColors=this.selectedColors.filter(p=>p.id!==e.id),this.messageService.clear();return}o?i-Number(o.stock||0)+l<=t?(o.stock=l,this.messageService.clear()):(this.messageService.clear(),this.messageService.add({severity:"warn",summary:"Stock",detail:`Stock m\xE1ximo alcanzado: ${this.selectedSize.stock}`})):i+l<=t?(this.selectedColors=[...this.selectedColors,e],this.messageService.clear()):(this.messageService.clear(),this.messageService.add({severity:"warn",summary:"Stock",detail:`No se puede seleccionar m\xE1s tallas: stock maximo ${this.selectedSize.stock}`}))}createColor(){this.dialogService.open(rt,{data:{productId:this.productId},header:"Crear Color",styleClass:"dialog-custom-form"}).onClose.subscribe({next:t=>{t?.success?(it(this.messageService,"Color Creado."),this.getSizes(),this.loadColors()):t?.error&&ot(this.messageService,"Hubo un error, intente nuevamente")}})}saveAllSelectedColors(){let e=this.selectedColors.map(t=>{let i={stock:t.stock};return this.productSizeColorsService.add(t.productSizeId,t.id,i).pipe(Q(()=>N(null)))});X(e).subscribe({next:()=>{this.loadColors(),this.selectedColors=[]}})}deleteAllSelectedColors(){let e=this.selectedColors.map(t=>this.productSizeColorsService.remove(t.productSizeId,t.id).pipe(Q(()=>N(null))));X(e).subscribe({next:()=>{this.loadColors(),this.selectedColors=[]}})}saveColorSizeProductButton(e){let t={stock:e.stock};this.productSizeColorsService.add(e.productSizeId,e.id,t).subscribe({next:()=>{this.loadColors(),this.selectedColors=this.selectedColors.filter(i=>i.id!==e.id)},error:()=>this.loadColors()})}editColorSizeProductButton(e){this.saveColorSizeProductButton(e)}removeColorSizeProductButton(e){this.productSizeColorsService.remove(e.productSizeId,e.id).subscribe({next:()=>{this.loadColors(),this.selectedColors=[]},error:()=>this.loadColors()})}static{this.\u0275fac=function(t){return new(t||r)(C(we),C(Se),C(G),C(j),C(lt))}}static{this.\u0275cmp=H({type:r,selectors:[["app-colors-form"]],standalone:!0,features:[B([G,j]),pe],decls:17,vars:11,consts:[["dt",""],[1,"col-12","mt-0"],[1,"w-full"],[1,"flex","flex-column","md:flex-row","md:justify-content-between"],[1,"flex","justify-content-center","md:justify-content-start","gap-2","mb-3"],["optionLabel","description","filterBy","description","placeholder","Selecciona una talla","styleClass","w-20rem",3,"ngModelChange","onChange","options","filter","showClear","ngModel"],["pTemplate","filter"],["pTemplate","selectedItem"],["pTemplate","item"],[1,"flex","justify-content-center","md:justify-content-center","gap-2","mb-3"],[1,"flex","justify-content-center","md:justify-content-end","gap-2","mb-3"],["pButton","","pRipple","","label","Nuevo","icon","pi pi-plus","severity","secondary","size","small",1,"btn-menu","w-9rem",3,"click"],["pButton","","pRipple","","label","Guardar","icon","pi pi-save","severity","secondary","size","small",1,"btn-menu","w-9rem",3,"click","disabled"],["pButton","","pRipple","","label","Remover","icon","pi pi-trash","severity","secondary","size","small",1,"btn-menu","w-9rem",3,"click","disabled"],["pButton","","pRipple","","label","Regresar","icon","pi pi-arrow-left","severity","help","size","small",1,"btn-menu-back","w-9rem",3,"routerLink"],["responsiveLayout","scroll","selectionMode","multiple","dataKey","id",3,"value","tableStyle","selection"],[1,"flex","gap-1"],[1,"p-inputgroup",3,"click","formGroup"],[1,"p-inputgroup-addon"],[1,"pi","pi-search"],["type","text","pInputText","","placeholder","Buscar por talla","formControlName","size"],["pButton","","icon","pi pi-times",3,"click"],[1,"flex","align-items-center","gap-2"],["responsiveLayout","scroll","selectionMode","multiple","dataKey","id",3,"selectionChange","value","tableStyle","selection"],["pTemplate","header"],["pTemplate","body"],[2,"width","3rem"],[3,"value"],[2,"width","15%","min-width","10rem"],[1,"p-column-title"],[1,"bg-input-text"],["type","text",1,"input-text",3,"ngModelChange","keyup","value","ngModel"],[1,"flex","justify-content-end","gap-2"],["pButton","","pRipple","",1,"p-button-rounded","p-menu",3,"click","icon"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-menu"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-menu",3,"click"]],template:function(t,i){t&1&&(s(0,"div")(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p-dropdown",5),R("ngModelChange",function(l){return F(i.selectedSize,l)||(i.selectedSize=l),l}),g("onChange",function(l){return i.getSelectedSize(l)}),y(6,Et,6,1,"ng-template",6)(7,Vt,3,1,"ng-template",7)(8,Ht,3,1,"ng-template",8),n()(),s(9,"div",9),v(10,"p-messages"),n(),s(11,"div",10)(12,"button",11),g("click",function(){return i.createColor()}),n(),s(13,"button",12),g("click",function(){return i.saveAllSelectedColors()}),n(),s(14,"button",13),g("click",function(){return i.deleteAllSelectedColors()}),n(),v(15,"button",14),n()(),y(16,Ft,4,4,"p-table",15),n()()()),t&2&&(z(i.stepper?"":" card"),c(5),f("options",i.sizes)("filter",!0)("showClear",!0),L("ngModel",i.selectedSize),c(8),f("disabled",!i.selectedColors||!i.selectedColors.length),c(),f("disabled",!i.selectedColors||!i.selectedColors.length),c(),f("routerLink",W(10,Mt)),c(),U(16,i.colors.length>0?16:-1))},dependencies:[We,Ze,Ie,O,$e,Ue,Ae,De,ze,Le,Be,je,Pe,Oe,Je,Ye,qe,Ke,Ne,Ge,Ve,Ee,st,tt,et,ye],styles:[".p-toolbar{padding:0;padding-left:1.25rem}  .btn-menu{background-color:#dfe3e8;border:1px solid #dfe3e8;color:#475569;border-radius:5px;height:39px}  .btn-menu-back{background-color:#ffb340;border:1px solid #ffb340;color:#000;border-radius:5px;height:39px}  .btn-selected{background-color:#75787b;color:#fff}  .p-datatable.p-datatable-hoverable-rows .p-datatable-tbody>tr:not(.p-highlight):hover{background:#0003;color:#475569}.bg-input-text[_ngcontent-%COMP%]   input.input-text[_ngcontent-%COMP%]{background-color:#f0f0f0;border-radius:62px;border:none;width:100%;height:48px;text-align:center;padding:1rem}.bg-input-text[_ngcontent-%COMP%]   input.input-text[_ngcontent-%COMP%]:focus-visible{outline:none}  .dialog-custom-form{width:30%!important;height:auto!important}  .dialog-custom-assign{width:15%!important;height:auto!important}@media (max-width: 480px){  .dialog-custom-form{width:70%!important;height:auto!important}  .dialog-custom-assign{width:70%!important;height:auto!important}}  .p-dropdown-header input{font-size:1rem;color:#334155;background:#fff;padding:.5rem .75rem;border:1px solid #cbd5e1}  .p-dropdown-header input:focus-visible{outline:none}  .p-dropdown-header button{color:#475569;background:#f1f5f9;border:1px solid #f1f5f9}  .p-dropdown-header button:hover{background:#e2e8f0;color:#334155;border-color:#e2e8f0}  .p-dropdown-header button:focus{box-shadow:none}  p-messages{margin-top:-13px}"]})}}return r})();export{Mi as ColorsFormComponent};
