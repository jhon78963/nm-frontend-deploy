import{a as H,b as J,c as _}from"./chunk-EXFECB25.js";import{c as u}from"./chunk-FTM6AZP4.js";import{A as W,B as q,l as D,m as G,o as N,p as O,t as f,u as b,v as R,z as V}from"./chunk-OTKL6CSN.js";import"./chunk-PKPWRCW7.js";import"./chunk-7QZVAUUM.js";import"./chunk-IKHQUVIJ.js";import{e as A}from"./chunk-UXKUMFFU.js";import"./chunk-SU5FXICQ.js";import{d as B,e as E}from"./chunk-JLFYD4SE.js";import"./chunk-3JYME56N.js";import"./chunk-CPF55P7Y.js";import{g as d,k as h}from"./chunk-KJUOHDYT.js";import{g as P,h as x,j as k}from"./chunk-CR7W443G.js";import{Ab as L,B as w,Ra as I,Sa as j,Tb as M,Ua as v,V as n,W as r,cb as y,d as S,db as T,ha as l,q as C,sa as c,ta as a,ua as z,xb as F,za as p}from"./chunk-DIPV63T5.js";var U=()=>[],X=()=>[10,20,50],be=(()=>{class m{constructor(e,t,i,o,s,K){this.dialogService=e,this.messageService=t,this.confirmationService=i,this.loadingService=o,this.sizesSelectedService=s,this.sizesService=K,this.columns=[{header:"#",field:"id",clickable:!1,image:!1,money:!1},{header:"Talla",field:"description",clickable:!1,image:!1,money:!1},{header:"Tipo de Talla",field:"sizeType",clickable:!1,image:!1,money:!1},{header:"Acci\xF3n",field:"button",clickable:!1,image:!1,money:!1}],this.limit=10,this.page=1,this.search="",this.sizeTypes=[],this.selectedSizeTypeId=1,this.callToAction=[{type:"button",size:"small",icon:"pi pi-pencil",outlined:!0,pTooltip:"Editar",tooltipPosition:"bottom",click:g=>this.editSizeButton(g.id)},{type:"button",size:"small",icon:"pi pi-trash",outlined:!0,pTooltip:"Eliminar",tooltipPosition:"bottom",click:(g,Q)=>this.deleteSizeButton(g.id,Q)}],this.selectedSizes=[],this.selectedSizeTypeIds=[],this.formGroup=new x({search:new k(null)})}ngOnInit(){this.getSizes(this.limit,this.page,this.search),this.formGroup.get("search")?.valueChanges.pipe(C(600)).subscribe(e=>{this.search=e||"",this.loadingService.sendLoadingState(!0),this.getSizes(this.limit,this.page,this.search)}),this.getSizeTypes()}ngOnDestroy(){this.sizeModal&&this.sizeModal.close()}clearFilter(){this.search="",this.loadingService.sendLoadingState(!0),this.formGroup.get("search")?.setValue("")}handleSizeTypeSelection(e){this.selectedSizeTypeIds=e,this.getSizes(this.limit,this.page,this.search,this.selectedSizeTypeIds)}getSizes(){return S(this,arguments,function*(e=this.limit,t=this.page,i=this.search,o=this.selectedSizeTypeIds){this.updatePage(t),this.sizesService.callGetList(e,t,i,o).subscribe(),setTimeout(()=>{this.loadingService.sendLoadingState(!1)},600)})}getSizeTypes(){this.sizesSelectedService.getSizeTypes().subscribe({next:e=>{this.sizeTypes=e}})}selectFilter(e){this.selectedSizeTypeId=e}onPageSelected(e){return S(this,null,function*(){this.updatePage((e.page??0)+1),this.getSizes(e.rows,this.page)})}get sizes(){return this.sizesService.getList()}get total(){return this.sizesService.getTotal()}addSizeButton(){this.sizeModal=this.dialogService.open(_,{data:{},header:"Crear Talla",styleClass:"dialog-custom-form"}),this.sizeModal.onClose.subscribe({next:e=>{e&&e?.success?f(this.messageService,"Talla Creada."):e?.error&&b(this.messageService,e?.error)}})}editSizeButton(e){this.sizeModal=this.dialogService.open(_,{data:{id:e},header:"Editar Talla",styleClass:"dialog-custom-form"}),this.sizeModal.onClose.subscribe({next:t=>{t&&t?.success?f(this.messageService,"Talla actualizada."):t?.error&&b(this.messageService,t?.error)}})}deleteSizeButton(e,t){this.confirmationService.confirm({target:t.target,message:"Deseas eliminar esta talla?",header:"Eliminar Talla",icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-danger p-button-text",rejectButtonStyleClass:"p-button-text p-button-text",acceptIcon:"none",rejectIcon:"none",acceptLabel:"S\xED",rejectLabel:"No",accept:()=>{this.sizesService.delete(e).subscribe(()=>{f(this.messageService,"La talla ha sido eliminada")})},reject:()=>{R(this.messageService,"No se realiz\xF3 ninguna acci\xF3n.")}})}updatePage(e){this.page=e}static{this.\u0275fac=function(t){return new(t||m)(r(u),r(h),r(d),r(N),r(H),r(J))}}static{this.\u0275cmp=w({type:m,selectors:[["app-sizes"]],standalone:!0,features:[I([d,u,h]),j],decls:14,vars:17,consts:[[1,"card"],[1,"flex","flex-column","md:flex-row","align-items-center","justify-content-between","gap-3","mt-3","w-full"],[1,"w-full","md:w-4","flex","justify-content-start","flex-order-2","md:flex-order-1"],["controlName","search",1,"w-full",3,"clearFilter","formGroup"],[1,"w-full","md:w-auto","flex","flex-wrap","justify-content-center","gap-2","flex-order-3","md:flex-order-2"],[3,"selectionChange","collection","selectedIds"],[1,"w-full","md:w-4","flex","justify-content-center","md:justify-content-end","flex-order-1","md:flex-order-3"],[3,"click","outlined"],[1,"pi","pi-plus",2,"font-size","1rem"],[3,"paginateSelected","data","columns","callToAction","cellToAction","total","limit","rowsPerPageOptions"]],template:function(t,i){if(t&1&&(c(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-input-search",3),p("clearFilter",function(){return i.clearFilter()}),a()(),c(4,"div",4)(5,"app-input-filter",5),p("selectionChange",function(s){return i.handleSizeTypeSelection(s)}),a()(),c(6,"div",6)(7,"p-button",7),p("click",function(){return i.addSizeButton()}),z(8,"i",8),a()()(),c(9,"app-table-pagination",9),y(10,"async"),y(11,"async"),p("paginateSelected",function(s){return i.onPageSelected(s)}),a(),z(12,"p-toast")(13,"p-confirmDialog"),a()),t&2){let o,s;n(3),l("formGroup",i.formGroup),n(2),l("collection",i.sizeTypes)("selectedIds",i.selectedSizeTypeIds),n(2),l("outlined",!0),n(2),l("data",(o=T(10,11,i.sizes))!==null&&o!==void 0?o:v(15,U))("columns",i.columns)("callToAction",i.callToAction)("cellToAction",i.cellToAction)("total",(s=T(11,13,i.total))!==null&&s!==void 0?s:0)("limit",i.limit)("rowsPerPageOptions",v(16,X))}},dependencies:[L,F,E,B,G,D,A,q,P,O,V,W,M],styles:[".btn-menu{background-color:#dfe3e8;border:1px solid #dfe3e8;color:#475569;border-radius:5px;height:39px}  .btn-selected{background-color:#75787b;color:#fff}  .dialog-custom-form{width:30%!important;height:auto!important}  .dialog-custom-assign{width:15%!important;height:auto!important}@media (max-width: 480px){  .dialog-custom-form{width:70%!important;height:auto!important}  .dialog-custom-assign{width:70%!important;height:auto!important}}"]})}}return m})();export{be as SizeListComponent};
